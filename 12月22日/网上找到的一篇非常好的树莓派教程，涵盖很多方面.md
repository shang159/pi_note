   
    <title>树莓派3的使用(Raspbian) - 作业部落 Cmd Markdown 编辑阅读器</title>


    <link href="https://www.zybuluo.com/static/img/favicon.png" type="image/x-icon" rel="icon">

    <link href="https://www.zybuluo.com/static/assets/1bc053c8.base.lib.min.css" rel="stylesheet" media="screen">


    
    <!-- id="prettify-style" will be used to get the link element below and change href to change prettify code, so it can't be in beginmin/endmin block. -->
    <link id="prettify-style" href="https://www.zybuluo.com/static/editor/libs/google-code-prettify/prettify-cmd.css" type="text/css" rel="stylesheet">
    <!--
    <link id="mermaid-style" href="https://www.zybuluo.com/static/editor/libs/mermaid/mermaid.forest.css" type="text/css" rel="stylesheet">
    -->
    <link href="https://www.zybuluo.com/static/assets/mdeditor/45c7d56d.layout.min.css" rel="stylesheet" media="screen">


    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44461741-1', 'zybuluo.com');
      ga('send', 'pageview');
    </script>
</head>

<body class="theme">

    <div id="global-prompt-alert" class="hide alert alert-warning">
        <span id="global-prompt-message"></span>
        <a id="close-global-prompt-alert" href="">[关闭]</a>
    </div>

    <!-- zybuluo's body -->
    







<!-- mdeditor's body -->






<div id="editor-reader-full" class="editor-reader-full-shown" style="position: static;">
    <div id="reader-full-topInfo" class="reader-full-topInfo-shown">
        <span>
            <code>@yangxuan</code>
        </span>
        <code><span class="article-updated-date">2016-12-13T09:15:19.000000Z</span></code>
        <code><span>字数 </span><span class="article-characters">31480</span></code>
        <code><span>阅读 </span><span class="article-read">14428</span></code>
    </div>
    <div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="j8o3" id="树莓派3的使用raspbian">树莓派3的使用(Raspbian)</h1><p data-anchor-id="mjf5"><code>raspberrypi</code> <br>
by 七喜 &lt;920196849@qq.com&gt;</p><div class="md-section-divider"></div><h2 data-anchor-id="guny" id="1可用系统">1.可用系统</h2><p data-anchor-id="7okx">树莓派没有BIOS，所以未插卡接显示器不会有任何显示</p><p data-anchor-id="uamd">因为树莓派有活跃的社区支持，使得可选系统很丰富，参照<a href="https://www.raspberrypi.org/downloads/" target="_blank">官网</a></p><p data-anchor-id="d3ya">桌面系统</p><table data-anchor-id="9pbk" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>RASPBIAN JESSIE</td>
 <td><a href="https://downloads.raspberrypi.org/raspbian_latest" target="_blank">镜像</a>；<a href="https://www.raspberrypi.org/documentation/installation/installing-images/windows.md" target="_blank">安装说明</a></td>
 <td>官方系统，无论性能还是支持方面都很突出</td>
</tr>
<tr>
 <td>Kali Linux</td>
 <td><a href="https://images.offensive-security.com/arm-images/kali-2.1.2-rpi2.img.xz" target="_blank">https://images.offensive-security.com/arm-images/kali-2.1.2-rpi2.img.xz</a></td>
 <td>支持内置Wi-Fi</td>
</tr>
<tr>
 <td>Fedora</td>
 <td>下载；安装参照<a href="https://fedoraproject.org/wiki/Raspberry_Pi" target="_blank">wiki</a></td>
 <td>XFCE；LXDE；MATE可以运行</td>
</tr>
<tr>
 <td>KANO OS</td>
 <td><a href="http://downloads.kano.me/public/Kanux-Beta-v3.0.0-jessie-release.img.zip" target="_blank">http://downloads.kano.me/public/Kanux-Beta-v3.0.0-jessie-release.img.zip</a></td>
 <td>儿童教学向</td>
</tr>
<tr>
 <td>Xubuntu</td>
 <td><a href="http://phillw.net/isos/pi2/xubuntu-16.04-desktop-armhf-raspberry-pi.img.xz" target="_blank">镜像</a></td>
 <td>16.04；支持内置Wi-Fi、蓝牙</td>
</tr>
<tr>
 <td>Lubuntu</td>
 <td><a href="http://phillw.net/isos/pi2/lubuntu-16.04-desktop-armhf-raspberry-pi.img.xz" target="_blank">镜像</a></td>
 <td>16.04</td>
</tr>
<tr>
 <td>Ubuntu Mate</td>
 <td><a href="https://ubuntu-mate.org/raspberry-pi/" target="_blank">下载</a></td>
 <td>16.04；稍显臃肿，运行速度较Raspbian逊色很多；支持蓝牙及内置Wi-Fi</td>
</tr>
<tr>
 <td>Deepin15</td>
 <td><a href="http://pan.baidu.com/s/1dF8vmQP" target="_blank">镜像</a>；解压后写入镜像即可；<a href="https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=38423&amp;page=1&amp;extra=#pid232950" target="_blank">来源</a></td>
 <td>用户名密码均为pi</td>
</tr>
<tr>
 <td>RaspEX</td>
 <td><a href="http://raspex.exton.se/" target="_blank">http://raspex.exton.se/</a></td>
 <td>基于Debian，Ubuntu</td>
</tr>
<tr>
 <td>Chromium OS</td>
 <td><a href="https://sourceforge.net/projects/chromnium-os-for-all-sbc/files/Raspberry%20Pi%20Images/Raspberry%20Pi%203/SamKinison_v0.5_Pi3_2GB.tar.xz/download" target="_blank">2GB版本</a>；<a href="https://sourceforge.net/projects/chromnium-os-for-all-sbc/files/Raspberry%20Pi%20Images/Raspberry%20Pi%203/SamKinison_v0.5_Pi3_16GB.tar.xz/download" target="_blank">16GB版本</a></td>
 <td>访问Google站点还不错（包括Youtube）</td>
</tr>
<tr>
 <td>（Manjaro）</td>
 <td><a href="http://manjaro-arm.org/downloads.php" target="_blank">下载页面</a>, <a href="http://manjaro-arm.org/downloads/community/rpi2/Manjaro-Arm-KDE/manjaro-arm-kde-16.12-rc2.zip" target="_blank">KDE Plasma版本</a>；<a href="http://wiki.manjaro-arm.org/index.php?title=Full_New_Users_Installation_guide" target="_blank">安装说明</a>,</td>
 <td>Base版本提供XFCE；支持内置Wi-Fi；软件升级后默认主题显示有问题，建议安装<a href="http://manjaro-arm.org/forums/announcements-and-other-news/gtk-3-20-and-maia-themes/" target="_blank">主题</a></td>
</tr>
</tbody></table><p data-anchor-id="d6e7">媒体中心</p><table data-anchor-id="rsu1" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>OSMC</td>
 <td><a href="https://osmc.tv/download/" target="_blank">https://osmc.tv/download/</a></td>
 <td>界面很漂亮，支持部分电视遥控器</td>
</tr>
<tr>
 <td>OpenELEC</td>
 <td><a href="http://openelec.tv/get-openelec" target="_blank">http://openelec.tv/get-openelec</a></td>
 <td></td>
</tr>
<tr>
 <td>XBian</td>
 <td><a href="https://sourceforge.net/projects/xbian/files/release/" target="_blank">https://sourceforge.net/projects/xbian/files/release/</a></td>
 <td></td>
</tr>
<tr>
 <td>RuneAudio</td>
 <td><a href="http://www.runeaudio.com/download/#raspberry-pi-2" target="_blank">http://www.runeaudio.com/download/#raspberry-pi-2</a></td>
 <td>音乐播放</td>
</tr>
</tbody></table><p data-anchor-id="8ka9">游戏中心</p><table data-anchor-id="hgk1" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>recalbox</td>
 <td><a href="https://github.com/recalbox/recalbox-os/releases" target="_blank">下载</a>；<a href="https://github.com/recalbox/recalbox-os/wiki/Installation-%28EN%29" target="_blank">安装说明</a></td>
 <td></td>
</tr>
<tr>
 <td>Lakka</td>
 <td><a href="http://www.lakka.tv/get/windows/rpi2/" target="_blank">下载</a>，Pi3下载较新的Pi2 版即可</td>
 <td>XMB界面；支持内置Wi-Fi</td>
</tr>
<tr>
 <td>RetroPie</td>
 <td><a href="https://github.com/RetroPie/RetroPie-Setup/releases" target="_blank">https://github.com/RetroPie/RetroPie-Setup/releases</a></td>
 <td></td>
</tr>
</tbody></table><p data-anchor-id="z1np">如果你有一台配备GTX 600/700/900系列显卡的PC，可以使用<a href="https://github.com/irtimmer/moonlight-embedded" target="_blank">Moonlight</a>将画面串流到树莓派3上</p><p data-anchor-id="qab0">Server</p><table data-anchor-id="zqth" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>RASPBIAN JESSIE LITE</td>
 <td><a href="https://downloads.raspberrypi.org/raspbian_latest" target="_blank">https://downloads.raspberrypi.org/raspbian_latest</a></td>
 <td></td>
</tr>
<tr>
 <td>MINIBIAN</td>
 <td><a href="https://sourceforge.net/projects/minibian/" target="_blank">https://sourceforge.net/projects/minibian/</a></td>
 <td>各方面接近Jessie Lite</td>
</tr>
<tr>
 <td>Dietpi</td>
 <td><a href="http://dietpi.com/" target="_blank">http://dietpi.com/</a></td>
 <td><a href="https://docs.google.com/spreadsheets/d/1mDHGZC-H6tU6_O8kuLTG8d4A8Nt7lV1Q7MXTR_6qw30/edit" target="_blank">DietPi vs Raspbian Lite</a></td>
</tr>
<tr>
 <td>Ubuntu Server</td>
 <td><a href="http://phillw.net/isos/pi2/ubuntu-standard-16.04-server-armhf-raspberry-pi.img.xz" target="_blank">standard</a>、<a href="http://phillw.net/isos/pi2/ubuntu-minimal-16.04-server-armhf-raspberry-pi.img.xz" target="_blank">minimal</a></td>
 <td>16.04</td>
</tr>
<tr>
 <td>Arch Linux</td>
 <td><a href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3" target="_blank">安装步骤</a></td>
 <td>安装参照Installation；或使用我写的一键安装<a href="https://git.io/v1Vtp" target="_blank">脚本</a></td>
</tr>
<tr>
 <td>CentOS</td>
 <td><a href="http://mirror.centos.org/altarch/7/isos/armhfp/" target="_blank">下载</a>；<a href="https://wiki.centos.org/SpecialInterestGroup/AltArch/Arm32/RaspberryPi3" target="_blank">官方说明</a></td>
 <td></td>
</tr>
<tr>
 <td>Manjaro</td>
 <td><a href="http://manjaro-arm.org/downloads.php" target="_blank">http://manjaro-arm.org/downloads.php</a></td>
 <td>SERVER EDITION</td>
</tr>
<tr>
 <td>OwnClocd</td>
 <td><a href="http://people.canonical.com/~kyrofa/owncloud-pi/" target="_blank">下载</a>；<a href="https://owncloud.org/blog/wd-labs-raspberry-pi-owncloud-and-ubuntu/" target="_blank">安装说明</a>（参照 'Where are we now' 部分最后一句）</td>
 <td>基于Ubuntu Core</td>
</tr>
</tbody></table><p data-anchor-id="w2if">Nerd</p><table data-anchor-id="ngy3" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>Gentoo</td>
 <td></td>
 <td><a href="https://wiki.gentoo.org/wiki/Raspberry_Pi/Quick_Install_Guide" target="_blank">安装</a></td>
</tr>
<tr>
 <td>LFS</td>
 <td><a href="http://www.intestinate.com/pilfs/images.html" target="_blank">镜像</a></td>
 <td>没有包管理，所有软件自己编译，要进入图形界面可能要花费至少几十小时，建议参照 <a href="http://www.linuxfromscratch.org/blfs/view/stable/" target="_blank">blfs-book</a>，并对照 archlinux-arm 的 <a href="https://github.com/archlinuxarm/PKGBUILDs" target="_blank">PKGBUILD</a>，因为其包括了 ARM 架构必须的 patch 以及 build 步骤；完成安装之后可以对 linux 特别是各软件间的依赖关系有更深入的了解</td>
</tr>
</tbody></table><p data-anchor-id="ykde">64-bit</p><table data-anchor-id="9ac7" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>OS</th>
 <th>下载</th>
 <th>附加信息</th>
</tr>
</thead>
<tbody><tr>
 <td>SUSE</td>
 <td><a href="http://tinyurl.com/slespi" target="_blank">地址</a></td>
 <td>建议注册后下载，提供一年免费更新</td>
</tr>
<tr>
 <td>openSUSE</td>
 <td><a href="https://en.opensuse.org/HCL%3aRaspberry_Pi3" target="_blank">地址</a></td>
 <td></td>
</tr>
<tr>
 <td>Archlinux</td>
 <td><a href="http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-3-latest.tar.gz" target="_blank">系统</a>, <a href="https://mirrors.tuna.tsinghua.edu.cn/archlinuxarm/os/ArchLinuxARM-rpi-3-latest.tar.gz" target="_blank">tuna 镜像</a></td>
 <td><a href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3" target="_blank">安装</a></td>
</tr>
<tr>
 <td>Fedora</td>
 <td><a href="https://www.kraxel.org/repos/rpi2/images/arm64-rpi3-f24-mainline-20160623.raw.xz" target="_blank">f24</a></td>
 <td>非官方</td>
</tr>
<tr>
 <td>CentOS</td>
 <td><a href="https://www.kraxel.org/repos/rpi2/images/arm64-rpi3-centos7-mainline-20160803.raw.xz" target="_blank">镜像</a></td>
 <td>非官方；或参照这个<a href="https://github.com/umiddelb/aarch64/wiki/Install-CentOS-7-on-your-favourite-ARMv8-ARM64-AArch64-board" target="_blank">页面</a></td>
</tr>
<tr>
 <td>Gentoo</td>
 <td></td>
 <td>参照 <a href="https://wiki.gentoo.org/wiki/Raspberry_Pi" target="_blank">wiki</a>， <a href="https://lug.ustc.edu.cn/wiki/mirrors/help/gentoo" target="_blank">USTC镜像</a></td>
</tr>
<tr>
 <td>FreeBSD</td>
 <td></td>
 <td>参照其 <a href="https://wiki.freebsd.org/arm64/rpi3" target="_blank">wiki</a></td>
</tr>
</tbody></table><p data-anchor-id="f44l">* 64 位系统多数采用 U-Boot 启动，部分 HDMI 显示器可能显示异常，需要在 <code>/boot/config.txt</code> 内加入：</p><pre data-anchor-id="zz9c"><code>hdmi_safe=1
</code></pre><p data-anchor-id="9i69">多系统启动工具：<a href="https://sourceforge.net/projects/berryboot/" target="_blank">Berryboot</a></p><p data-anchor-id="rfz2"><a href="http://elinux.org/RPi_Distributions" target="_blank">更多选择</a></p><p data-anchor-id="lfgk">以上可用系统均支持树莓派3且仍在更新，至于树莓派2可能有更多选择</p><p data-anchor-id="we5x">虽然树莓派3有一颗64位的处理器，<del>但是系统目前仍为32bit</del>，官网论坛的xylnao提供了64位Debian<a href="http://www.tom-yam.or.jp/rpi3/rpi3-arm64-debian-20160414.img.xz" target="_blank">镜像</a></p><p data-anchor-id="aj4x">64位的一些进展：<a href="https://mobile.twitter.com/zxombie/status/706526055373414400" target="_blank">FreeBSD</a> （需用<a href="http://elinux.org/RPi_Serial_Connection" target="_blank">串口通信</a>），<a href="https://github.com/zeldin/u-boot-rpi3" target="_blank">U-Boot </a>，<a href="https://www.raspberrypi.org/forums/viewtopic.php?f=72&amp;t=137963&amp;hilit=64bit&amp;start=50" target="_blank">官网论坛</a>，<a href="https://forums.gentoo.org/viewtopic-t-1041352-postdays-0-postorder-asc-start-0.html" target="_blank">Gentoo论坛</a></p><p data-anchor-id="ssa4">另外关于 Win10 IoT，如果不是做硬件开发的话不建议安装，因为和普通的Win10完全是两个概念，程序需要自己开发，确实有GUI，但和你想的那种完全不同</p><p data-anchor-id="io4k">导航</p><p data-anchor-id="7anp"><div class="toc"><div class="toc">
<ul>
<li><a href="#树莓派3的使用raspbian">树莓派3的使用(Raspbian)</a><ul>
<li><a href="#1可用系统">1.可用系统</a></li>
<li><a href="#系统登陆及设置本地化简体中文">系统登陆及设置本地化（简体中文）</a></li>
<li><a href="#关于用途">关于用途</a></li>
<li><a href="#电源的选择">电源的选择</a></li>
<li><a href="#外壳">外壳</a></li>
<li><a href="#连接显示器">连接显示器</a></li>
<li><a href="#2提升sd卡读写">2.提升SD卡读写</a></li>
<li><a href="#3nano编辑器常用快捷键">3.Nano编辑器常用快捷键</a></li>
<li><a href="#4设置wi-fi命令行">4.设置Wi-Fi（命令行）</a></li>
<li><a href="#5更换国内源">5.更换国内源</a></li>
<li><a href="#6ssh无密码登陆">6.SSH无密码登陆</a></li>
<li><a href="#7为ssh启用两步认证">7.为SSH启用两步认证</a></li>
<li><a href="#8远程连接gui">8.远程连接（GUI）</a></li>
<li><a href="#9连接蓝牙键盘">9.连接蓝牙键盘</a></li>
<li><a href="#10用samba共享文件">10.用Samba共享文件</a></li>
<li><a href="#11nas-pi">11.NAS Pi</a></li>
<li><a href="#12gpio">12.GPIO</a></li>
<li><a href="#13mount-windows共享文件夹">13.mount Windows共享文件夹</a></li>
<li><a href="#14screen">14.Screen</a></li>
<li><a href="#15百度云">15.百度云</a></li>
<li><a href="#16备份树莓派">16.备份树莓派</a></li>
<li><a href="#17f2fs">17.f2fs</a></li>
<li><a href="#18raspberrycast">18.RaspberryCast</a></li>
<li><a href="#19安装-web-server">19.安装 web server</a></li>
<li><a href="#20更改默认的xsession">20.更改默认的xsession</a></li>
<li><a href="#21查看软件版本">21.查看软件版本</a></li>
<li><a href="#22爬虫scrapy">22.爬虫（Scrapy）</a></li>
<li><a href="#23动态dnsdnspod">23.动态DNS（DNSPod）</a></li>
<li><a href="#24配置svn-server">24.配置SVN Server</a></li>
<li><a href="#25用命令行发邮件mutt">25.用命令行发邮件（Mutt）</a></li>
<li><a href="#26命令行访问bbstelnet">26.命令行访问BBS（Telnet）</a></li>
<li><a href="#27命令行播放网易音乐netease-musicbox">27.命令行播放网易音乐（Netease-MusicBox）</a></li>
<li><a href="#28命令行阅读官网博客的rssnewsbeuter">28.命令行阅读官网博客的RSS（Newsbeuter）</a></li>
<li><a href="#29微信聊天机器人itchat">29.微信聊天机器人（ItChat）</a></li>
<li><a href="#30搜索软件包">30.搜索软件包</a></li>
<li><a href="#31微信远程控制树莓派">31.微信远程控制树莓派</a></li>
<li><a href="#常用网站">常用网站</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><div class="md-section-divider"></div><h2 data-anchor-id="8squ" id="系统登陆及设置本地化简体中文">系统登陆及设置本地化（简体中文）</h2><p data-anchor-id="0z8d">（如果启动停留在彩虹画面，说明 <strong>kernel.img</strong> 启动失败，建议替换或重新写入系统，<a href="http://elinux.org/R-Pi_Troubleshooting#Coloured_splash_screen" target="_blank">信息来源</a> ）</p><p data-anchor-id="7a5k">用户名: pi</p><p data-anchor-id="iu87">密码: raspberry</p><p data-anchor-id="cbbf">写入系统在Windows上可以用<a href="http://sourceforge.net/projects/win32diskimager/" target="_blank"><strong>Win32DiskImager</strong></a>，详细<a href="https://www.raspberrypi.org/documentation/installation/installing-images/windows.md" target="_blank">安装指导</a>。备份的话也可以用这个软件，点击<strong>Read</strong>，选择镜像存放路径并输入镜像名称。</p><p data-anchor-id="bcvt">写入之后会发现Micro SD卡的容量“变小”了，这只是表面现象：实际上写入之后卡上会存在两个分区，一个是启动分区，格式为FAT（也就是在Windows上可见的分区，容量约几十MB，<strong>config.txt</strong> 就存放在这里），一个是系统分区，格式为EXT4（大小不到4G，在Windows上读写可以用安装在虚拟机里的Linux）</p><p data-anchor-id="xpim">之后这张卡如果不想用了，可以选择<a href="https://www.sdcard.org/downloads/formatter_4/" target="_blank">SD Card Formatter</a>来格式化</p><p data-anchor-id="2e01">安装系统后可以通过这样一个脚本进行初始配置：</p><pre data-anchor-id="pcz5"><code>#!/bin/bash
echo "network={
    ssid="ssid_here"
    psk="psk_here"}" | sudo tee --append /etc/wpa_supplicant/wpa_supplicant.conf
echo "dtparam=sd_overclock=100
hdmi_drive=2" | sudo tee --append /boot/config.txt
sudo sed -i -e 's/XKBLAYOUT="gb"/XKBLAYOUT="us"/g' /etc/default/keyboard
sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
sudo sed -i '1 s/    /#/g' /etc/apt/sources.list
echo "deb http://mirrors.neusoft.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi
#deb-src http://mirrors.neusoft.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi" | sudo tee --append /etc/apt/sources.list
sudo sed -i '1 s/    /#/g' /etc/apt/sources.list.d/raspi.list
echo "deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ jessie main ui
#deb-src http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ jessie main ui" | sudo tee --append /etc/apt/sources.list.d/raspi.list
sudo apt-get update&amp;&amp;sudo apt-get upgrade -y
echo "alias ll=\"ls -l\"
alias cl=\"cd \"\$@\" &amp;&amp; ls\"" | tee --append "$HOME"/.bashrc
</code></pre><p data-anchor-id="1y4g">保存上述内容为 <code>rpi-init.sh</code>, 并替换为你的 WiFi 配置</p><p data-anchor-id="8cf3">运行脚本：</p><blockquote data-anchor-id="axkm" class="white-blockquote">
  <p><code>sh rpi-init.sh</code></p>
</blockquote><p data-anchor-id="o3ys">以上脚本依次配置了：</p><ul data-anchor-id="zwnw">
<li>WiFi(如果是隐藏 SSID 的网络，在 <code>psk</code> 下一行加入 <code>scan_ssid=1</code> )</li>
<li>修改 <code>config.txt</code> (加入 sd_overclock 以提升读写，并为 Lapdock 启用音频)</li>
<li>修改键盘布局为美式键盘</li>
<li>时区</li>
<li>替换软件源为中科大，并屏蔽原官方源</li>
<li>更新系统</li>
<li>alias</li>
</ul><p data-anchor-id="ntg7">如果想自己手动配置，对照脚本输入对应的命令即可</p><p data-anchor-id="81x6">解决中文乱码：</p><blockquote data-anchor-id="js07" class="white-blockquote">
  <p><code>sudo raspi-config</code></p>
</blockquote><p data-anchor-id="ajqe">选择  </p><blockquote data-anchor-id="h90l" class="white-blockquote">
  <p><strong>5 Internationalisation Options</strong></p>
</blockquote><p data-anchor-id="l3e5">中文支持:</p><blockquote data-anchor-id="eqxu" class="white-blockquote">
  <p><strong>I1 Change Locale</strong></p>
</blockquote><p data-anchor-id="dhuc">方向键移动至列表末尾，用<strong>空格键</strong>选中以下项：</p><pre data-anchor-id="xhmx"><code>[*] zh_CN.UTF-8 UTF-8              
</code></pre><p data-anchor-id="tpf0">之后按<strong>TAB</strong>键移动至 Ok, 接下来会选择系统默认显示语言，按个人需求选择</p><p data-anchor-id="v3fs">修改时区：</p><blockquote data-anchor-id="rjqp" class="white-blockquote">
  <p><strong>I2 Change Timezone</strong></p>
</blockquote><p data-anchor-id="j1x6">进入后依次找到选中 <strong>Asia</strong>，城市选择 <strong>Shanghai</strong></p><p data-anchor-id="hk8s">中文字体：</p><p data-anchor-id="a7p5">新版系统（2016-05-27）似乎需要安装中文字体</p><blockquote data-anchor-id="x0wp" class="white-blockquote">
  <p><code>sudo apt-get install fonts-wqy-zenhei</code></p>
</blockquote><p data-anchor-id="8hue">安装输入法（Fcitx，拼音）：</p><blockquote data-anchor-id="5ryv" class="white-blockquote">
  <p><code>sudo apt-get install fcitx fcitx-pinyin</code></p>
</blockquote><p data-anchor-id="wdwp">设置：</p><p data-anchor-id="g5dp"><strong>Menu</strong> -&gt; <strong>Run</strong></p><p data-anchor-id="ysff">输入：</p><blockquote data-anchor-id="vt51" class="white-blockquote">
  <p><code>im-config</code></p>
</blockquote><p data-anchor-id="drw3">选中 <strong>fcitx</strong></p><p data-anchor-id="rvaw">可能会问是否改变系统设置，选择改动</p><p data-anchor-id="fg57">重启后可测试输入法，在文本编辑器或浏览器内，按 <strong>Ctrl</strong> + <strong>空格键</strong> 切换至拼音，按 <strong>Shift</strong>可在中英文输入间切换</p><div class="md-section-divider"></div><h2 data-anchor-id="r6o9" id="关于用途">关于用途</h2><p data-anchor-id="6tqp">诚然树莓派的性能确实算不上强劲，甚至可能不如你的手机，但也没有想象的那么不堪</p><p data-anchor-id="34m6">一个很好的<a href="https://www.raspberrypi.org/blog/serving-raspberry-pi-3-launch-raspberry-pi-3/" target="_blank">例子</a>就是一台树莓派3承担了官网 5% 的流量，图片来自官网博客，版权归属原作者<a href="https://www.raspberrypi.org/blog/author/helenlynn/" target="_blank">Helen Lynn</a></p><p data-anchor-id="na2r">下图是2月29日树莓派3发布当天这台RPi3的流量情况</p><p data-anchor-id="psgk"><img src="https://www.raspberrypi.org/wp-content/uploads/2016/03/pi3-traffic.png" alt="" title=""></p><p data-anchor-id="3d7u">在Linux电脑终端内输入：</p><blockquote data-anchor-id="eim6" class="white-blockquote">
  <p><code>HEAD -e https://www.raspberrypi.org/</code></p>
</blockquote><p data-anchor-id="7ei0">如果最后返回结果有如下信息：</p><blockquote data-anchor-id="fc6p" class="white-blockquote">
  <p><code>X-Served-By: Raspberry Pi 3</code></p>
</blockquote><p data-anchor-id="sqwv">那你这次请求就是由这台树莓派3响应的</p><p data-anchor-id="y9uj">运行十几个小时后它宕机了，如果下代内存加倍也许就能避免这种情况</p><p data-anchor-id="zjfc">但即使这样，当自己Blog的Server应当是足够的</p><p data-anchor-id="dpna">这台树莓派还有一个自己的Twitter<a href="https://twitter.com/HostingPi3" target="_blank">账号</a>，内容是自动发布的</p><p data-anchor-id="g6dh">其它用途包括但不限于：<a href="https://about.gitlab.com/downloads/#raspberrypi2" target="_blank">GitLab</a> （类似Github），<a href="http://www.owncloudbook.com/owncloud-on-raspberry-pi/" target="_blank">OwnCloud</a> (私有云)...</p><p data-anchor-id="eji0">别的地方也有它的身影：<a href="http://www.mathworks.com/hardware-support/raspberry-pi-matlab.html?s_tid=srchtitle" target="_blank">MATLAB</a>， <a href="http://www.hanselman.com/blog/BuildingVisualStudioCodeOnARaspberryPi3.aspx" target="_blank">Visual Studio Code</a></p><p data-anchor-id="hmm4">西数还专为它做了硬盘：<a href="http://store.wdc.com/store/wdus/en_US/DisplayAccesoryProductDetailsPage/ThemeID.21986300/Accessories/WD_PiDrive_Kit/productID.323686500/categoryId.13096100" target="_blank">PiDrive</a></p><p data-anchor-id="q5ti">一些奇特的用途：<a href="http://i.imgur.com/jlRrDxi.jpg" target="_blank">Morse Code</a><a href="https://en.wikipedia.org/wiki/Morse_code" target="_blank">[?]</a>，<a href="https://www.youtube.com/watch?v=oPmzY4TJSl8" target="_blank">Radiofax</a><a href="https://en.wikipedia.org/wiki/Radiofax" target="_blank">[?]</a></p><p data-anchor-id="gkc5">对Linux历史感兴趣的话可以看下纪录片The Code，最近整理了以前做的字幕，已上传至B站：<a href="http://www.bilibili.com/video/av4242055/" target="_blank">The Code</a></p><p data-anchor-id="39ty">本身一块开发板能有<a href="http://www.engadget.com/2016/02/29/raspberry-pi-3/" target="_blank">8百万</a>的销量，就已经是很神奇的事情了</p><div class="md-section-divider"></div><h2 data-anchor-id="jtoq" id="电源的选择">电源的选择</h2><p data-anchor-id="b778">电源一定要选择质量好的，推荐<a href="https://www.raspberrypi.org/products/universal-power-supply/" target="_blank">官方</a>，或者其它规格为5V2A的电源</p><p data-anchor-id="866y">这是因为3代树莓派在加入蓝牙和Wi-Fi后耗电量大幅提升， <br>
可以参照以下图片，来源 <a href="http://blog.pimoroni.com/raspberry-pi-3/" target="_blank">pimoroni</a>, 版权归属原作者</p><p data-anchor-id="jh5u"><img src="http://blog.pimoroni.com/content/images/2016/02/cpu_current.png" alt="" title=""></p><p data-anchor-id="yzil">参照<a href="https://www.raspberrypi.org/forums/viewtopic.php?p=582098#p582098" target="_blank">论坛</a>，如果供电不足的话，屏幕的右上方会显示一个彩色小方块</p><p data-anchor-id="a5nt">另外参照官方论坛的一个<a href="https://www.raspberrypi.org/forums/viewtopic.php?p=930695#p930695" target="_blank">回复</a>3代的USB口默认提供1.2A电流，已经不需要再在config.txt内修改了</p><p data-anchor-id="0hp8">关于树莓派的UPS（Uninterruptible power supply），普通的移动电源并不适合这项任务，这是因为大部分移动电源在拔下插座后转换电路需要时间，而树莓派因没有电池会关机，等切换电路完毕才重新启动，即使这个时间很短，但树莓派依然会中断运行；少数移动电源不会有这个问题，但长时间这样运作会缩短它的寿命，不如考虑真正的UPS</p><div class="md-section-divider"></div><h2 data-anchor-id="d7go" id="外壳">外壳</h2><p data-anchor-id="sz9b">依旧推荐<a href="https://www.raspberrypi.org/products/raspberry-pi-case/" target="_blank">官方</a>，因为3代相比前代取消了Micro SD卡的弹出式设计，这样需要在卡的位置预留更大空间才能方便取出，取消的原因据说是部分用户反映弹出式可能把卡弹飞</p><p data-anchor-id="o5rm">另外有<a href="https://imgur.com/a/tzgPU" target="_blank">用户</a>说3代的树莓派要比前代热了很多</p><p data-anchor-id="53g9">不过在日常使用中并没有那么严重，目前实际使用中大部分时间在50°以下，除非超频或者持续满负荷运作，一般来讲加装散热片足够，风扇可选但并不必须</p><p data-anchor-id="wy5w">散热片最好选铜材料，因为常用导热材料里它的导热系数最高，铝质也可，尺寸14mm*14mm,另外如果你很想尝试新材料的话可以考虑Versarien的这款<a href="http://www.mouser.cn/new/versarien-technologies/versarien-lph-heat-sink/" target="_blank">泡沫结构散热块</a>，散热效果未知</p><p data-anchor-id="6v8j">查看树莓派温度：</p><blockquote data-anchor-id="mpng" class="white-blockquote">
  <p><code>/opt/vc/bin/vcgencmd measure_temp</code></p>
</blockquote><p data-anchor-id="bzee">如果想持续检测温度：</p><blockquote data-anchor-id="zpoc" class="white-blockquote">
  <p><code>watch /opt/vc/bin/vcgencmd measure_temp</code></p>
</blockquote><p data-anchor-id="ek71">退出：<strong>CTRL</strong> + <strong>c</strong></p><p data-anchor-id="u3o2">如果你的树莓派大部分时间都很烫的话，可以考虑风扇加散热片</p><p data-anchor-id="upym">以下是一个不错的方案，产品来自<a href="http://uedata.amazon.com/RaspberryPi4u/b/ref=bl_dp_s_web_10854567011?ie=UTF8&amp;node=10854567011&amp;field-lbr_brands_browse-bin=RaspberryPi4u" target="_blank">RaspberryPi4u</a>，图片版权归属原作者<a href="https://twitter.com/ghalfacree" target="_blank">Gareth Halfacree</a></p><p data-anchor-id="34xn"><img src="http://ww3.sinaimg.cn/large/67026c3bgw1f25xljk7qcj20go0b575a.jpg" alt="" title=""></p><p data-anchor-id="p1bb">可惜这位卖家已经不做了，想要类似产品的话可以DIY，风扇选购<a href="https://s.taobao.com/search?q=sepa+1505&amp;imgfile=&amp;commend=all&amp;ssid=s5-e&amp;search_type=item&amp;sourceId=tb.index&amp;spm=a21bo.7724922.8452-taobao-item.1&amp;ie=utf8&amp;initiative_id=tbindexz_20160322" target="_blank">SEPA 1505</a>，这是一款15mm*15mm的风扇，可以接3.3V或5V，参照<a href="https://www.element14.com/community/servlet/JiveServlet/previewBody/73950-102-8-339300/pi3_gpio.png" target="_blank">GPIO定义</a>，红正黑负，红色接5V输出，黑色接GND</p><p data-anchor-id="szx3">风扇与散热块用热缩管连接，截取一段热缩管套在散热块与风扇连接处，加热后热缩管因其特性会收缩；调速等功能请自行搜索</p><div class="md-section-divider"></div><h2 data-anchor-id="l906" id="连接显示器">连接显示器</h2><p data-anchor-id="upmc">可选：HDMI输出，3.5mm视频输出，其它转接方式，以及<a href="https://www.raspberrypi.org/products/raspberry-pi-touch-display/" target="_blank">官方显示屏</a> </p><ul data-anchor-id="oww0">
<li><p>HDMI最方便，直接连接即可</p></li>
<li><p>用3.5mm视频输出可以连接CRT旧电视，接口集成在音频口，所以直接在音频口接耳机会发现底噪很大，不过社区正在<a href="https://www.raspberrypi.org/forums/viewtopic.php?p=907075#p907075" target="_blank">改进</a>这点</p>

<p>可以直接淘宝购买Zune的RCA Cable，或者DIY接口定义一致的线材，定义参考下图，图片版权归属原作者<a href="http://www.raspberrypi-spy.co.uk/2014/07/raspberry-pi-model-b-3-5mm-audiovideo-jack/" target="_blank">MATT</a>：</p></li>
</ul><p data-anchor-id="bmdc"><img src="http://www.raspberrypi-spy.co.uk/wp-content/uploads/2014/07/Model-B-Plus-Audio-Video-Jack-Diagram.png" alt="" title=""></p><p data-anchor-id="q05f">另外需要修改<strong>config.txt</strong>（PAL制式电视）：</p><p data-anchor-id="anet">（新版的Jessie不用修改也能显示，如果没声音的话再进行以下操作）</p><p data-anchor-id="e8e5">树莓派上：</p><blockquote data-anchor-id="qtxm" class="white-blockquote">
  <p><code>sudo nano /boot/config</code></p>
</blockquote><p data-anchor-id="lbdz">或Windows上打开<strong>config.txt</strong></p><p data-anchor-id="h3us">将</p><pre data-anchor-id="nz7m"><code>#sdtv_mode=2
</code></pre><p data-anchor-id="m3hd">前面的<strong>#</strong>删掉，变为：</p><pre data-anchor-id="dnh8"><code>sdtv_mode=2
</code></pre><p data-anchor-id="3rkg">配合老电视和 Xbox 360手柄或8位堂完全仿红白机的<a href="http://www.fc30.com/why-fc30.html" target="_blank">FC30</a>手柄怀旧FC是相当不错的选择，系统方面可以选择<a href="http://www.lakka.tv/" target="_blank">Lakka</a> , <a href="https://github.com/RetroPie/RetroPie-Setup/releases" target="_blank">RetroPie</a> , <a href="https://github.com/recalbox/recalbox-os/releases" target="_blank">recalbox-os</a></p><ul data-anchor-id="eg4v">
<li>HDMI可以转接VGA，但<a href="http://www.guokr.com/post/521521/" target="_blank">多篇</a><a href="http://elinux.org/RPi_Screens#RGB_analog.2FVGA" target="_blank">文章</a>都建议一定用有源的HDMI转VGA，也就是可以连接电源的，否则会烧毁树莓派</li>
</ul><p data-anchor-id="10yc">修改<strong>config.txt</strong>文件，添加：</p><pre data-anchor-id="zjvn"><code>hdmi_force_hotplug=1
hdmi_group=2
hdmi_mode=16
hdmi_drive=2
</code></pre><p data-anchor-id="mx5v">hdmi_mode=16为设置1024x768 60Hz <br>
其它分辨率可参考官方<a href="https://www.raspberrypi.org/documentation/configuration/config-txt.md" target="_blank">config.txt说明</a></p><p data-anchor-id="2yqj">一些有源HDMI转VGA的选择：</p><p data-anchor-id="ofo2"><a href="https://item.taobao.com/item.htm?spm=a230r.1.14.81.BUpooG&amp;id=36383983811&amp;ns=1&amp;abbucket=5#detail" target="_blank">白色款1</a>，<a href="https://item.taobao.com/item.htm?spm=a1z10.3-c.w4002-12319432390.42.AyuyUo&amp;id=522669810776" target="_blank">白色款2</a>，<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.178.BUpooG&amp;id=26176400239&amp;ns=1&amp;abbucket=5#detail" target="_blank">黑色款1</a>，<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.19.yzUU5g&amp;id=45554145042&amp;ns=1&amp;abbucket=5#detail" target="_blank">黑色款2</a>，<a href="https://s.taobao.com/search?q=moto+vga&amp;imgfile=&amp;commend=all&amp;ssid=s5-e&amp;search_type=item&amp;sourceId=tb.index&amp;spm=a21bo.50862.201856-taobao-item.1&amp;ie=utf8&amp;initiative_id=tbindexz_20160404&amp;sort=price-asc" target="_blank">Moto</a>，（似乎这款最便宜，需要另外配一个Micro HDMI母对HDMI公，比如<a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.PJmxhh&amp;id=522669770858&amp;_u=43fd7qp6073" target="_blank">这个</a>）</p><ul data-anchor-id="17u9">
<li>Lapdock <br>
也可以连接Moto Lapdock（需要一个Micro HDMI转HDMI 母转公用作视频输出，比如<a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.PJmxhh&amp;id=522669770858&amp;_u=43fd7qp6073" target="_blank">这个</a>，一个USB 2.0 A公对MICRO B母作数据传输(Lapdock的键盘及USB口设备)，比如<a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.PJmxhh&amp;id=522646699667&amp;_u=43fd7qp72a9" target="_blank">这个</a>）或者<a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwis8eXkxPTLAhVFvYMKHUWyAf0QFggmMAE&amp;url=http%3A%2F%2Fnexdock.com%2F&amp;usg=AFQjCNHEBSe4GoiVCPCa_WbdhVMnq6eVhw&amp;sig2=coL9ICJSnuPRNO-nB-w_zw" target="_blank">NexDock</a>当笔记本</li>
</ul><div class="md-section-divider"></div><div class="sequence-diagram theme theme-white" title="点击查看大图" data-anchor-id="4oe9"><svg height="230" version="1.1" width="424.65625" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block-obj1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock55-obj2" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block-obj1" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="10" y="10" width="58.65625" height="26" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="14.65625" y="15" width="48.65625" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="39.328125" y="23" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Webtop</tspan></text><rect x="10" y="46" width="76" height="36" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="20" y="56" width="56" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="48" y="64" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Lapdock</tspan></text><rect x="10" y="174" width="76" height="36" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="20" y="184" width="56" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="48" y="192" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Lapdock</tspan></text><path fill="none" stroke="#000000" d="M48,82L48,174" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="350.65625" y="46" width="44" height="36" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="360.65625" y="56" width="24" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="372.65625" y="64" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">RPi</tspan></text><rect x="350.65625" y="174" width="44" height="36" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="360.65625" y="184" width="24" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="372.65625" y="192" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">RPi</tspan></text><path fill="none" stroke="#000000" d="M372.65625,82L372.65625,174" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="61.65625" y="99" width="296.65625" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="210.328125" y="107" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Micro HDMI female to HDMI male(Video)</tspan></text><path fill="none" stroke="#000000" d="M48,118C48,118,326.69388037361205,118,367.65426025274155,118" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="57.65625" y="135" width="304.65625" height="16" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="210.328125" y="143" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: &quot;Andale Mono&quot;, monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="6" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Micro USB female to USB 2.0 male(Data)</tspan></text><path fill="none" stroke="#000000" d="M48,154C48,154,326.69388037361205,154,367.65426025274155,154" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg></div><p data-anchor-id="yllh">如果用Moto Lapdock的话，可能发现没有声音，需要作以下改动：</p><blockquote data-anchor-id="tsnv" class="white-blockquote">
  <p><code>sudo nano /boot/config.txt</code></p>
</blockquote><p data-anchor-id="gwcb">找到：</p><blockquote data-anchor-id="ua37" class="white-blockquote">
  <p>hdmi_drive=2</p>
</blockquote><p data-anchor-id="n4z7">去掉前面的‘#’使其生效</p><p data-anchor-id="9n48">另外Lapdock的音量键需配置才能在Raspbian上使用</p><blockquote data-anchor-id="h2a4" class="white-blockquote">
  <p><code>sudo nano ~/.config/openbox/lxde-pi-rc.xml</code></p>
</blockquote><p data-anchor-id="0vfg">使用 <strong>CTRL</strong> + <strong>w</strong> 搜索 <strong>keyboard</strong></p><p data-anchor-id="coka">定位到：</p><pre data-anchor-id="8ml7"><code>&lt;keyboard&gt;
......
</code></pre><p data-anchor-id="fi15">添加：</p><pre data-anchor-id="rq7h"><code>   &lt;keybind key="XF86AudioLowerVolume"&gt;
     &lt;action name="Execute"&gt;
       &lt;command&gt;amixer set PCM 250-&lt;/command&gt;
     &lt;/action&gt;
   &lt;/keybind&gt;
   &lt;keybind key="XF86AudioRaiseVolume"&gt;
     &lt;action name="Execute"&gt;
       &lt;command&gt;amixer set PCM 250+&lt;/command&gt;
     &lt;/action&gt;
   &lt;/keybind&gt;
</code></pre><p data-anchor-id="wuon">保存 <strong>CTRL</strong> + <strong>o</strong> 退出 <strong>CTRL</strong> + <strong>x</strong></p><p data-anchor-id="vggi">之后在Pi的终端内运行：</p><blockquote data-anchor-id="zb5e" class="white-blockquote">
  <p><code>openbox --reconfigure</code></p>
</blockquote><ul data-anchor-id="087h">
<li>Nokia 5510/3310 LCD <br>
这块屏幕的尺寸约1.5寸，分辨率为84x48，不论字体采用8x8还是6x12显示的内容都很有限，而且因为是拆机屏，质量难以保证 <br>
诺基亚5510/3310的液晶模块controller一般为PCD8544，接口为 <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus" target="_blank">SPI</a></li>
</ul><p data-anchor-id="wyhr">连线：</p><table data-anchor-id="f0a4" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>LCD</th>
 <th>Driver gpio name</th>
 <th>Raspberry Pi</th>
 <th>备注</th>
</tr>
</thead>
<tbody><tr>
 <td>GND</td>
 <td></td>
 <td>GND</td>
 <td></td>
</tr>
<tr>
 <td>VCC</td>
 <td></td>
 <td>3.3V</td>
 <td></td>
</tr>
<tr>
 <td>CLK</td>
 <td></td>
 <td>SCLK</td>
 <td></td>
</tr>
<tr>
 <td>DIN</td>
 <td></td>
 <td>MOSI</td>
 <td></td>
</tr>
<tr>
 <td>D/C</td>
 <td>dc</td>
 <td>GPIO24</td>
 <td>Command/data</td>
</tr>
<tr>
 <td>CS</td>
 <td></td>
 <td>CE0</td>
 <td>Chip Select</td>
</tr>
<tr>
 <td>RST</td>
 <td>reset</td>
 <td>GPIO25</td>
 <td></td>
</tr>
<tr>
 <td>LED</td>
 <td>led</td>
 <td>GPIO23</td>
 <td></td>
</tr>
</tbody></table><p data-anchor-id="77up">然后通过：</p><blockquote data-anchor-id="4b6o" class="white-blockquote">
  <p><code>gpio readall</code></p>
</blockquote><p data-anchor-id="jdhb">查找树莓派上对应的端口，得到：</p><pre data-anchor-id="h1i4"><code> +-----+-----+---------+------+---+---Pi 3---+---+------+---------+-----+-----+
 | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
 +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
 |     |     |    3.3v |      |   |  1 || 2  |   |      | 5v      |     |     |
 |   2 |   8 |   SDA.1 |   IN | 1 |  3 || 4  |   |      | 5V      |     |     |
 |   3 |   9 |   SCL.1 |   IN | 1 |  5 || 6  |   |      | 0v      |     |     |
 |   4 |   7 | GPIO. 7 |   IN | 1 |  7 || 8  | 1 | ALT5 | TxD     | 15  | 14  |
 |     |     |      0v |      |   |  9 || 10 | 1 | ALT5 | RxD     | 16  | 15  |
 |  17 |   0 | GPIO. 0 |   IN | 0 | 11 || 12 | 0 | IN   | GPIO. 1 | 1   | 18  |
 |  27 |   2 | GPIO. 2 |   IN | 0 | 13 || 14 |   |      | 0v      |     |     |
 |  22 |   3 | GPIO. 3 |   IN | 0 | 15 || 16 | 1 | OUT  | GPIO. 4 | 4   | 23  |
 |     |     |    3.3v |      |   | 17 || 18 | 1 | OUT  | GPIO. 5 | 5   | 24  |
 |  10 |  12 |    MOSI | ALT0 | 0 | 19 || 20 |   |      | 0v      |     |     |
 |   9 |  13 |    MISO | ALT0 | 0 | 21 || 22 | 1 | OUT  | GPIO. 6 | 6   | 25  |
 |  11 |  14 |    SCLK | ALT0 | 0 | 23 || 24 | 1 | OUT  | CE0     | 10  | 8   |
 |     |     |      0v |      |   | 25 || 26 | 1 | OUT  | CE1     | 11  | 7   |
 |   0 |  30 |   SDA.0 |   IN | 1 | 27 || 28 | 1 | IN   | SCL.0   | 31  | 1   |
 |   5 |  21 | GPIO.21 |   IN | 1 | 29 || 30 |   |      | 0v      |     |     |
 |   6 |  22 | GPIO.22 |   IN | 1 | 31 || 32 | 0 | IN   | GPIO.26 | 26  | 12  |
 |  13 |  23 | GPIO.23 |   IN | 0 | 33 || 34 |   |      | 0v      |     |     |
 |  19 |  24 | GPIO.24 |   IN | 0 | 35 || 36 | 0 | IN   | GPIO.27 | 27  | 16  |
 |  26 |  25 | GPIO.25 |   IN | 0 | 37 || 38 | 0 | IN   | GPIO.28 | 28  | 20  |
 |     |     |      0v |      |   | 39 || 40 | 0 | IN   | GPIO.29 | 29  | 21  |
 +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
 | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
 +-----+-----+---------+------+---+---Pi 3---+---+------+---------+-----+-----+
</code></pre><p data-anchor-id="r2oc">对照 <strong>BCM</strong> 及 <strong>Physical</strong> 栏，依次找到连线表内的对应端口</p><p data-anchor-id="i2z9">下面是一种接法：</p><table data-anchor-id="2u1c" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>LCD</th>
 <th>Raspberry Pi(Physical)</th>
</tr>
</thead>
<tbody><tr>
 <td>GND</td>
 <td>9</td>
</tr>
<tr>
 <td>BL</td>
 <td>16</td>
</tr>
<tr>
 <td>VCC</td>
 <td>1</td>
</tr>
<tr>
 <td>CLK</td>
 <td>23</td>
</tr>
<tr>
 <td>Din</td>
 <td>19</td>
</tr>
<tr>
 <td>DC</td>
 <td>18</td>
</tr>
<tr>
 <td>CE</td>
 <td>24</td>
</tr>
<tr>
 <td>RST</td>
 <td>22</td>
</tr>
</tbody></table><p data-anchor-id="dg2n">启用 <strong>SPI</strong> ：</p><blockquote data-anchor-id="r6c0" class="white-blockquote">
  <p><code>sudo nano /boot/config.txt</code></p>
</blockquote><p data-anchor-id="u743">加入：</p><blockquote data-anchor-id="hozy" class="white-blockquote">
  <p><code>dtparam=spi=on</code></p>
</blockquote><p data-anchor-id="ihn2">重启生效</p><p data-anchor-id="ddgg">这块单色LCD可以通过 <a href="https://github.com/notro/fbtft" target="_blank">FBTFT</a> 进行console显示，这样在终端里能做的事用它都可以做到</p><p data-anchor-id="x6nu">由于Linux kernel staging tree已经加入FBTFT，所以不需额外安装</p><p data-anchor-id="ltes">终端显示：</p><blockquote data-anchor-id="jbqy" class="white-blockquote">
  <p><code>sudo modprobe fbtft_device name=nokia3310</code></p>
</blockquote><p data-anchor-id="kdxb"><em>dmesg</em> 会显示：</p><pre data-anchor-id="aniy"><code>......
[   52.092954] fbtft: module is from the staging directory, the quality is unknown, you have been warned.
[   52.098978] fbtft_device: module is from the staging directory, the quality is unknown, you have been warned.
[   52.101017] fbtft_device:  SPI devices registered:
[   52.101040] fbtft_device:      spidev spi0.0 500kHz 8 bits mode=0x00
[   52.101053] fbtft_device:      spidev spi0.1 500kHz 8 bits mode=0x00
[   52.101062] fbtft_device:  'fb' Platform devices registered:
[   52.101092] fbtft_device:      soc:fb id=-1 pdata? no
[   52.101132] fbtft_device: Deleting spi0.0
[   52.101429] spi spi0.0: setting up native-CS0 as GPIO 8
[   52.101544] fbtft_device:  GPIOS used by 'nokia3310':
[   52.101555] fbtft_device:    'reset' = GPIO25
[   52.101564] fbtft_device:    'dc' = GPIO24
[   52.101572] fbtft_device:    'led' = GPIO23
[   52.101580] fbtft_device:  SPI devices registered:
[   52.101592] fbtft_device:      spidev spi0.1 500kHz 8 bits mode=0x00
[   52.101603] fbtft_device:      fb_pcd8544 spi0.0 400kHz 8 bits mode=0x00
[   52.113572] fb_pcd8544: module is from the staging directory, the quality is unknown, you have been warned.
[   52.253490] graphics fb1: fb_pcd8544 frame buffer, 84x48, 7 KiB video memory, 0 KiB DMA buffer memory, fps=20, spi0.0 at 0 MHz
</code></pre><p data-anchor-id="bijf"><em>lsmod</em> 会显示：</p><pre data-anchor-id="dccr"><code>Module                  Size  Used by
fb_pcd8544              3048  0 
fbtft_device           27354  0 
fbtft                  27484  2 fb_pcd8544,fbtft_device
syscopyarea             2773  1 fbtft
sysfillrect             3299  1 fbtft
sysimgblt               1921  1 fbtft
fb_sys_fops             1157  1 fbtft
</code></pre><p data-anchor-id="xt2j">启用终端：</p><blockquote data-anchor-id="jks8" class="white-blockquote">
  <p><code>con2fbmap 1 1</code></p>
</blockquote><p data-anchor-id="p9rd">（如果遇到屏幕正面看是black screen，在别的角度可以看到文字的话，这和屏幕本身连接方式有关，其液晶与电路板是用导电胶连接的，可能没有充分接触，稍微压一下边框应该可以正常显示；如果LED闪得厉害，多半是屏幕有问题，建议找卖家换一个）</p><div class="md-section-divider"></div><h2 data-anchor-id="kn9h" id="2提升sd卡读写">2.提升SD卡读写</h2><p data-anchor-id="vhx9">关于不同存储卡在树莓派上的性能表现参考这个<a href="http://www.pidramble.com/wiki/benchmarks/microsd-cards" target="_blank">页面</a></p><p data-anchor-id="q0gq">此项设置需UHS-1级别或更高的存储卡，并升级至最新系统（2016-03之后版本），推荐三星EVO/EVO+，或SanDisk Ultra</p><blockquote data-anchor-id="lyjz" class="white-blockquote">
  <p><code>sudo nano /boot/config.txt</code></p>
</blockquote><p data-anchor-id="y2rz">加入：</p><pre data-anchor-id="himt"><code>dtparam=sd_overclock=100
</code></pre><p data-anchor-id="fwmd">其中100可以为其他数值，比如有些卡不支持这么高可以设置为80（默认50）</p><p data-anchor-id="yvbx">查看是否生效：</p><blockquote data-anchor-id="zkun" class="white-blockquote">
  <p><code>dmesg | grep "mmc0"</code></p>
</blockquote><p data-anchor-id="cmn5">成功的话则会显示：</p><blockquote data-anchor-id="r2mt" class="white-blockquote">
  <p>[    2.596650] mmc0: overclocking to 100000000Hz</p>
</blockquote><p data-anchor-id="kwc7">之后可用<strong>dd</strong>命令或者<strong>hdparm</strong>测试一下</p><p data-anchor-id="4t3d">dd:</p><blockquote data-anchor-id="02li" class="white-blockquote">
  <p><code>dd if=/dev/zero of=test bs=1M count=1024</code></p>
  
  <p><code>dd if=test of=/dev/null bs=1M</code></p>
</blockquote><p data-anchor-id="wxzb">hdparm:</p><blockquote data-anchor-id="obc8" class="white-blockquote">
  <p><code>sudo apt-get install hdparm</code></p>
  
  <p><code>sudo hdparm -tT /dev/mmcblk0</code></p>
</blockquote><p data-anchor-id="ukja">对比一下overclock之前，提升应该是相当明显的，在一块三星EVO 32G存储卡上的结果是：读速20MB/s-&gt;40MB/s，写速15MB/s-&gt;18MB/s</p><p data-anchor-id="vu74">这项设置本身并没有什么危险，官方默认值低只是为了提高对卡的兼容性</p><div class="md-section-divider"></div><h2 data-anchor-id="jtje" id="3nano编辑器常用快捷键">3.Nano编辑器常用快捷键</h2><p data-anchor-id="cdp0">查找：</p><blockquote data-anchor-id="n9dt" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>W</strong></p>
</blockquote><p data-anchor-id="h168">退出：</p><blockquote data-anchor-id="pkwj" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>X</strong></p>
</blockquote><p data-anchor-id="ht4g">保存：</p><blockquote data-anchor-id="gill" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>O</strong></p>
</blockquote><p data-anchor-id="hokt">跳至文件末尾:</p><blockquote data-anchor-id="ptrb" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>W</strong> + <strong>V</strong>   </p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="zuzg" id="4设置wi-fi命令行">4.设置Wi-Fi（命令行）</h2><blockquote data-anchor-id="7llj" class="white-blockquote">
  <p><code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code></p>
</blockquote><p data-anchor-id="fvs4">添加以下内容:</p><pre data-anchor-id="ocge"><code>network={
    ssid="wifi_name"
    psk="Password"
}
</code></pre><p data-anchor-id="q6n0">如果 SSID 是隐藏的，再在 <code>psk</code> 下面一行加入：</p><pre data-anchor-id="uhti"><code>scan_ssid=1
</code></pre><p data-anchor-id="1k8e">保存：</p><blockquote data-anchor-id="b8ew" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>O</strong></p>
</blockquote><p data-anchor-id="tt2m">退出：</p><blockquote data-anchor-id="d1j5" class="white-blockquote">
  <p><strong>CTRL</strong> + <strong>X</strong></p>
</blockquote><p data-anchor-id="9p4m">这之后输入：</p><blockquote data-anchor-id="g178" class="white-blockquote">
  <p><code>ifconfig</code></p>
</blockquote><p data-anchor-id="67g8">如果<strong>wlan0</strong>处分配了IP地址，则说明Wi-Fi已经连上了</p><p data-anchor-id="dmxn">如果没有，则输入：</p><blockquote data-anchor-id="49w3" class="white-blockquote">
  <p><code>sudo ifdown wlan0</code></p>
  
  <p><code>sudo ifup wlan0</code></p>
</blockquote><p data-anchor-id="c3v5">稍等片刻（1分钟左右），再次输入</p><blockquote data-anchor-id="w3qs" class="white-blockquote">
  <p><code>ifconfig</code></p>
</blockquote><p data-anchor-id="1o21">树莓派3的Wi-Fi速度以及相比前代的硬件提升可参照<a href="http://blog.pimoroni.com/raspberry-pi-3/" target="_blank">pimoroni</a>，另外其内置Wi-Fi<a href="https://www.reddit.com/r/raspberry_pi/comments/4ah4oi/psa_the_raspberry_pi_3s_embedded_wifi_card_does/" target="_blank">不支持</a>  <a href="https://en.wikipedia.org/wiki/Promiscuous_mode" target="_blank">promiscuous mode</a></p><p data-anchor-id="qshm">查看是否连接成功</p><div class="md-section-divider"></div><h2 data-anchor-id="hxsa" id="5更换国内源">5.更换国内源</h2><p data-anchor-id="kebn">（仅适用于连接不上官方源的用户，某些系统软件只能通过官方源安装或更新）</p><blockquote data-anchor-id="s3dq" class="white-blockquote">
  <p><code>sudo nano /etc/apt/sources.list</code></p>
</blockquote><p data-anchor-id="dkkv">测试最佳软件源：</p><ul data-anchor-id="7vp8">
<li>安装 netselect</li>
</ul><blockquote data-anchor-id="tl88" class="white-blockquote">
  <p><code>sudo apt-get install netselect</code></p>
</blockquote><ul data-anchor-id="hokq">
<li>git clone</li>
</ul><blockquote data-anchor-id="d5vo" class="white-blockquote">
  <p><code>git clone https://github.com/sjqlwy/ccrm.git</code></p>
  
  <p><code>cd ./ccrm</code></p>
</blockquote><ul data-anchor-id="kwoq">
<li>运行</li>
</ul><blockquote data-anchor-id="crdk" class="white-blockquote">
  <p><code>sudo sh ccrm.sh</code></p>
  
  <p><code>sudo apt-get update</code></p>
</blockquote><p data-anchor-id="3037">测出连接速度最快的源之后，修改<em>sources.list</em>，（假设结果为阿里源）</p><blockquote data-anchor-id="0fr1" class="white-blockquote">
  <p><code>sudo nano /etc/apt/sources.list</code></p>
</blockquote><p data-anchor-id="5tuh">加入：</p><pre data-anchor-id="npie"><code>deb http://mirrors.aliyun.com/raspbian/raspbian/ jessie main non-free contrib
deb-src http://mirrors.aliyun.com/raspbian/raspbian/ jessie main non-free contrib
</code></pre><blockquote data-anchor-id="q9ik" class="white-blockquote">
  <p><code>sudo apt-get update</code></p>
</blockquote><p data-anchor-id="05t7">（如果仍然遇到连接问题，则进行以下操作）</p><blockquote data-anchor-id="7vt7" class="white-blockquote">
  <p><code>sudo nano /etc/apt/sources.list.d/raspi.list</code></p>
</blockquote><p data-anchor-id="ixvr">在原来的内容前添加 <strong>#</strong> 号，注释掉原来的源</p><p data-anchor-id="le1v">有时<strong>apt-get</strong>的key可能出问题，具体来说就算官方源也会报说来源未知</p><p data-anchor-id="60v9">这时可以尝试运行：</p><blockquote data-anchor-id="foz6" class="white-blockquote">
  <p><code>sudo apt-key update</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="pd4c" id="6ssh无密码登陆">6.SSH无密码登陆</h2><p data-anchor-id="3upd">先在树莓派上生成SSH Key:</p><blockquote data-anchor-id="q7y6" class="white-blockquote">
  <p><code>ssh-keygen -t rsa -C &lt;YOURNANME&gt;@&lt;YOURDEVICE&gt;</code></p>
  
  <p><code>cd ~</code></p>
  
  <p><code>install -d -m 700 ~/.ssh</code></p>
  
  <p><code>cat ~/.ssh/id_rsa.pub | ssh &lt;USERNAME&gt;@&lt;IP-ADDRESS&gt; 'cat &gt;&gt; .ssh/authorized_keys'</code></p>
</blockquote><p data-anchor-id="5rp1">也可在putty或其它软件上生成</p><p data-anchor-id="upwi">然后将生成的公钥 <strong>pi.pub</strong> 用Samba/SFTP/ZMODEM传送至树莓派</p><blockquote data-anchor-id="4cot" class="white-blockquote">
  <p><code>cat pi.pub &gt;&gt; .ssh/authorized_keys</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="vtso" id="7为ssh启用两步认证">7.为SSH启用两步认证</h2><blockquote data-anchor-id="1z5t" class="white-blockquote">
  <p><code>sudo apt-get install libpam-google-authenticator</code></p>
</blockquote><p data-anchor-id="0jbe">配置:</p><blockquote data-anchor-id="5atc" class="white-blockquote">
  <p><code>google-authenticator</code></p>
</blockquote><p data-anchor-id="qhg1">截屏(WIN: <strong>WIN</strong> <strong>+</strong> <strong>Prtscr</strong>, Android: <strong>Power Button</strong> <strong>+</strong> <strong>Volume -</strong>） 存至安全的地方</p><p data-anchor-id="jn97">所有选项均选yes</p><p data-anchor-id="px0m">用手机扫描二维码</p><blockquote data-anchor-id="0div" class="white-blockquote">
  <p><code>sudo nano /etc/pam.d/sshd</code></p>
</blockquote><p data-anchor-id="sg7r">添加:</p><blockquote data-anchor-id="h8xd" class="white-blockquote">
  <p>auth required pam_google_authenticator.so</p>
</blockquote><p data-anchor-id="278z">然后</p><blockquote data-anchor-id="kc90" class="white-blockquote">
  <p><code>sudo nano /etc/ssh/sshd_config</code></p>
</blockquote><p data-anchor-id="jv9l">找到 <strong>ChallengeResponseAuthentication</strong></p><p data-anchor-id="fhc5">把 <strong>no</strong> 改成 <strong>yes</strong></p><blockquote data-anchor-id="l2ik" class="white-blockquote">
  <p><code>sudo apt-get install ssh</code></p>
  
  <p><code>sudo /etc/init.d/sshd restart</code></p>
</blockquote><p data-anchor-id="0g9t">测试:</p><blockquote data-anchor-id="h2iu" class="white-blockquote">
  <p><code>ssh pi@raspberrypi</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="w99a" id="8远程连接gui">8.远程连接（GUI）</h2><ul data-anchor-id="vwuz">
<li>VNC:</li>
</ul><blockquote data-anchor-id="9gcl" class="white-blockquote">
  <p><code>sudo apt-get install tightvncserver</code></p>
  
  <p><code>tightvncserver</code></p>
  
  <p><code>vncserver :1 -geometry 1024x768 -depth 24</code></p>
</blockquote><p data-anchor-id="yph3">Client（PC，手机）上需要安装<a href="https://www.realvnc.com/download/viewer/" target="_blank">Viewer</a></p><ul data-anchor-id="62kq">
<li>TeamViewer:</li>
</ul><p data-anchor-id="aore">需在树莓派上安装 <a href="https://pages.teamviewer.com/raspberrypi_contest/" target="_blank">Host</a></p><p data-anchor-id="fq9n">然后还需要在PC或手机上安装 <a href="http://www.teamviewer.com/zhcn/download/windows/" target="_blank">TeamViewer</a></p><p data-anchor-id="4omw">（host显示有点问题，但不影响使用）</p><ul data-anchor-id="83gr">
<li>XRDP:</li>
</ul><blockquote data-anchor-id="z482" class="white-blockquote">
  <p><code>sudo apt-get install xrdp</code></p>
</blockquote><p data-anchor-id="25nw">更推荐VNC，因为XRDP使用中曾经碰到过问题，而且未找到解决方案</p><div class="md-section-divider"></div><h2 data-anchor-id="zy87" id="9连接蓝牙键盘">9.连接蓝牙键盘</h2><blockquote data-anchor-id="frwl" class="white-blockquote">
  <p><code>bluetoothctl -a</code></p>
  
  <p><code>power on</code></p>
  
  <p><code>agent KeyboardOnly</code></p>
  
  <p><code>default-agent</code></p>
  
  <p><code>pairable on</code></p>
  
  <p><code>scan on</code></p>
  
  <p><code>pair 40:F4:07:4A:FC:E7</code></p>
  
  <p><code>trust 40:F4:07:4A:FC:E7</code></p>
  
  <p><code>connect 40:F4:07:4A:FC:E7</code></p>
  
  <p><code>quit</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="l1fs" id="10用samba共享文件">10.用Samba共享文件</h2><p data-anchor-id="tklm">在树莓派上:</p><blockquote data-anchor-id="616n" class="white-blockquote">
  <p><code>sudo apt-get install samba samba-common-bin</code></p>
  
  <p><code>sudo nano /etc/samba/smb.conf</code></p>
</blockquote><p data-anchor-id="f3ye">找到 <strong>############ Misc ############</strong></p><p data-anchor-id="m1je">添加（可以提升文件传输速度，有线连接情况下约10MB/s）:</p><pre data-anchor-id="t6em"><code>socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=65536 SO_SNDBUF=65536
</code></pre><p data-anchor-id="bxhp">找到<strong>======================= Share Definitions =======================</strong></p><p data-anchor-id="pzu6">把</p><pre data-anchor-id="sqf1"><code>read only = **yes**
</code></pre><p data-anchor-id="xu7n">改为:</p><pre data-anchor-id="gso2"><code>read only = **no**
</code></pre><p data-anchor-id="etvx">添加用户pi并设置密码</p><blockquote data-anchor-id="jlql" class="white-blockquote">
  <p><code>sudo smbpasswd -a pi</code></p>
</blockquote><p data-anchor-id="acss">重启:</p><blockquote data-anchor-id="2sm1" class="white-blockquote">
  <p><code>sudo service samba reload</code></p>
</blockquote><p data-anchor-id="9mub">Windows上（win10）:</p><p data-anchor-id="qmgd">此电脑 &gt; 映射网络驱动器 &gt; 输入 <code>\\raspberrypi\pi</code></p><div class="md-section-divider"></div><h2 data-anchor-id="t38e" id="11nas-pi">11.NAS Pi</h2><blockquote data-anchor-id="4nyd" class="white-blockquote">
  <p><code>sudo apt-get update&amp;&amp;sudo apt-get install ntfs-3g samba samba-common-bin hdparm</code></p>
  
  <p><code>sudo nano /etc/samba/smb.conf</code></p>
</blockquote><p data-anchor-id="2tvv">添加:</p><pre data-anchor-id="9ktr"><code>[share]
  comment = Public Storage
  path = /mnt/usbdisk
  valid users = root pi
  browseable = yes
  public = yes
  read only = no
</code></pre><blockquote data-anchor-id="o3nt" class="white-blockquote">
  <p><code>sudo mkdir /mnt/usbdisk</code> <br>
  <code>sudo nano /etc/fstab</code></p>
</blockquote><p data-anchor-id="rtfa">添加:</p><pre data-anchor-id="bsv3"><code>/dev/sda1       /mnt/usbdisk    ntfs-3g   defaults        0       0
</code></pre><p data-anchor-id="5jiw">硬盘休眠（10分钟无操作休眠，计算方法：120*5=600）：</p><blockquote data-anchor-id="1bvf" class="white-blockquote">
  <p><code>sudo nano /etc/hdparm.conf</code></p>
</blockquote><p data-anchor-id="00ka">添加:</p><pre data-anchor-id="cvp9"><code>/dev/sda {
write_cache = on
spindown_time = 120
}
</code></pre><blockquote data-anchor-id="m5y1" class="white-blockquote">
  <p><code>sudo service hdparm restart</code></p>
</blockquote><p data-anchor-id="kf40">如果想提升速度可以参考这篇<a href="https://archlinuxarm.org/forum/viewtopic.php?f=53&amp;t=5001" target="_blank">帖子</a>，版权归属原作者Obihoernchen</p><p data-anchor-id="f5vx">比如先修改<strong>smb.conf</strong>：</p><blockquote data-anchor-id="ki2g" class="white-blockquote">
  <p><code>sudo nano /etc/samba/smb.conf</code></p>
</blockquote><p data-anchor-id="ql2t">在<strong>Misc</strong>部分加入：</p><pre data-anchor-id="c00z"><code>write cache size = 2097152

use sendfile = yes
</code></pre><p data-anchor-id="vc88">保存退出，之后修改<strong>fstab</strong>：</p><blockquote data-anchor-id="1k02" class="white-blockquote">
  <p><code>sudo nano /etc/fstab</code></p>
</blockquote><p data-anchor-id="43d6">比如之前内容为：</p><pre data-anchor-id="48wv"><code>/dev/sda1  /mnt/usbdisk  ntfs-3g   defaults,noatime  0  0
</code></pre><p data-anchor-id="ye6f">修改为：</p><pre data-anchor-id="7g7g"><code>/dev/sda1  /mnt/usbdisk  ntfs-3g   defaults,noatime,big_writes  0  0
</code></pre><p data-anchor-id="r7ux">修改之后保存退出，测试通过Samba向挂载的NTFS格式分区复制文件，速度从小于3MB/s-&gt;9MB/s</p><p data-anchor-id="lr5d">如果需要下载服务，可以参照这篇 <a href="http://mkitby.com/2016/01/15/raspberry-pi-nas-remote-download-aria2/" target="_blank">文章</a> 安装配置aria2</p><div class="md-section-divider"></div><h2 data-anchor-id="u8j8" id="12gpio">12.GPIO</h2><p data-anchor-id="o1v0">命令行:</p><blockquote data-anchor-id="1kln" class="white-blockquote">
  <p><code>gpio readall</code></p>
</blockquote><p data-anchor-id="yhgl">这个方式查看GPIO最直观，在Jessie上可以直接使用，如果是Jessie Lite或其它系统则需安装 <a href="https://projects.drogon.net/raspberry-pi/wiringpi/download-and-install/" target="_blank"><strong>WiringPi</strong></a> ：</p><pre data-anchor-id="whn2"><code>sudo apt-get install git-core
sudo apt-get update
sudo apt-get upgrade
git clone git://git.drogon.net/wiringPi
cd wiringPi
git pull origin
./build
</code></pre><p data-anchor-id="rbgi">此时输入:</p><blockquote data-anchor-id="dgik" class="white-blockquote">
  <p><code>gpio -v</code></p>
</blockquote><p data-anchor-id="9cgd">可查看版本信息</p><p data-anchor-id="om47">图片来源 <a href="https://www.element14.com/community" target="_blank">Element 14 社区</a>，版权归属原作者</p><p data-anchor-id="xcvs"><img src="https://www.element14.com/community/servlet/JiveServlet/previewBody/73950-102-8-339300/pi3_gpio.png" alt="" title=""></p><div class="md-section-divider"></div><h2 data-anchor-id="jjvg" id="13mount-windows共享文件夹">13.mount Windows共享文件夹</h2><p data-anchor-id="jcax">Windows端:</p><ol data-anchor-id="0b0l">
<li><p>添加用户:</p>

<p>用户名: pi</p>

<p>密码:raspberry</p></li>
<li><p>打开网络共享</p></li>
<li><p>确保防火墙允许文件和打印机共享</p></li>
<li><p>创建文件夹 <strong>share</strong> 并右击其选择 <strong>高级共享</strong>,为用户pi添加读写权限</p></li>
</ol><p data-anchor-id="fbhp">树莓派上:</p><blockquote data-anchor-id="ffht" class="white-blockquote">
  <p><code>sudo apt-get install cifs-utils</code>  </p>
  
  <p><code>sudo mkdir /mnt/share</code></p>
  
  <p><code>sudo nano /etc/fstab</code></p>
</blockquote><p data-anchor-id="e48s">添加：</p><blockquote data-anchor-id="dm73" class="white-blockquote">
  <p><code>//your.ip.he.re/share /mnt/share cifs username=pi,password=raspberry,iocharset=utf8,sec=ntlm 0 0</code></p>
</blockquote><p data-anchor-id="q552">重启</p><blockquote data-anchor-id="6ykk" class="white-blockquote">
  <p><code>sudo reboot</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="72w9" id="14screen">14.Screen</h2><p data-anchor-id="0d18">安装:</p><blockquote data-anchor-id="rjlu" class="white-blockquote">
  <p><code>sudo apt-get install screen</code></p>
</blockquote><p data-anchor-id="p78t">运行:</p><blockquote data-anchor-id="ffq5" class="white-blockquote">
  <p><code>screen bash</code></p>
</blockquote><p data-anchor-id="uoq4">Detach:</p><blockquote data-anchor-id="b5p1" class="white-blockquote">
  <p><code>CTRL + A</code> release,then press  <code>D</code></p>
</blockquote><p data-anchor-id="qozn">列出当前所有screen:</p><blockquote data-anchor-id="8im7" class="white-blockquote">
  <p><code>screen -list</code></p>
</blockquote><p data-anchor-id="hzqv">重新连接:</p><blockquote data-anchor-id="cp56" class="white-blockquote">
  <p><code>screen -r</code></p>
</blockquote><p data-anchor-id="zm9b">结束:</p><blockquote data-anchor-id="h365" class="white-blockquote">
  <p>CTRL + D</p>
</blockquote><p data-anchor-id="c4j4">重新连接attached的session:</p><blockquote data-anchor-id="cjo9" class="white-blockquote">
  <p><code>screen -D -r &lt;session-id&gt;</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="kyyv" id="15百度云">15.百度云</h2><p data-anchor-id="oweb"><a href="https://github.com/GangZhuo/BaiduPCS" target="_blank">Baidu pcs</a> (命令行)</p><p data-anchor-id="4yay">Prerequisite:</p><blockquote data-anchor-id="j7eh" class="white-blockquote">
  <p><code>apt-get install build-essential libcurl4-openssl-dev</code></p>
</blockquote><p data-anchor-id="zlis">git:</p><blockquote data-anchor-id="9ck4" class="white-blockquote">
  <p><code>git clone https://github.com/GangZhuo/BaiduPCS.git</code></p>
</blockquote><p data-anchor-id="tagx">编译:</p><blockquote data-anchor-id="5b0f" class="white-blockquote">
  <p><code>cd BaiduPCS</code></p>
  
  <p><code>make</code></p>
</blockquote><p data-anchor-id="6e77">安装:</p><blockquote data-anchor-id="1z2q" class="white-blockquote">
  <p><code>cp ./bin/pcs /usr/bin/</code></p>
  
  <p><code>(chmod a+x /usr/bin/pcs)</code></p>
</blockquote><p data-anchor-id="oi9t">登陆:</p><blockquote data-anchor-id="wpbc" class="white-blockquote">
  <p><code>pcs login</code></p>
</blockquote><p data-anchor-id="ehvm">下载文件夹:</p><blockquote data-anchor-id="vvpp" class="white-blockquote">
  <p><code>pcs synch -d &lt;local path&gt; &lt;remote path&gt;</code></p>
</blockquote><p data-anchor-id="tewe">帮助:</p><blockquote data-anchor-id="2qa6" class="white-blockquote">
  <p><code>pcs help</code></p>
</blockquote><ul data-anchor-id="564c">
<li><a href="https://github.com/LiuLang/bcloud" target="_blank">bcloud</a> (GUI)</li>
</ul><p data-anchor-id="b2un">记得使用中在树莓派上曾经遇到过问题，更推荐第一个</p><div class="md-section-divider"></div><h2 data-anchor-id="bdl2" id="16备份树莓派">16.备份树莓派</h2><p data-anchor-id="pqve">脚本来自官方论坛的一个 <a href="https://www.raspberrypi.org/forums/viewtopic.php?p=635962#p635962" target="_blank">帖子</a>，版权归属原作者jinx</p><p data-anchor-id="yni7">可配合crontab定时执行备份</p><blockquote data-anchor-id="mwe9" class="white-blockquote">
  <p><code>sudo touch bkup_rpimage.sh</code></p>
  
  <p><code>sudo nano bkup_rpimage.sh</code></p>
</blockquote><p data-anchor-id="wy93"><em>bkup_rpimage.sh</em></p><pre data-anchor-id="37r8"><code>#!/bin/bash
# bkup_rpimage.sh by jinx
#
# Utility script to backup Raspberry Pi's SD Card to a sparse image file
# mounted as a filesystem in a file, allowing for efficient incremental
# backups using rsync

VERSION=v1.0
SDCARD=/dev/mmcblk0

# Echos traces with yellow text to distinguish from other output
trace () {
    echo -e "$(tput setaf 3)${1}$(tput sgr 0)"
}

# Echos en error string in red text and exit
error () {
    echo -e "$(tput setaf 1)${1}$(tput sgr 0)" &gt;&amp;2
    exit 1
}

# Creates a sparse $IMAGE clone of $SDCARD and attaches to $LOOPBACK
    do_create () {
        trace "Creating sparse $IMAGE, the apparent size of $SDCARD"
        dd if=/dev/zero of=$IMAGE bs=$(blockdev --getss $SDCARD) count=0 seek=$(blockdev --getsz $SDCARD)

    if [ -s $IMAGE ]; then
            trace "Attaching $IMAGE to $LOOPBACK"
            losetup $LOOPBACK $IMAGE
        else
            error "$IMAGE was not created or has zero size"
    fi

    trace "Copying partition table from $SDCARD to $LOOPBACK"
    parted -s $LOOPBACK mklabel msdos
        sfdisk --dump $SDCARD | sfdisk --force $LOOPBACK

    trace "Formatting partitions"
    partx --add $LOOPBACK
        mkfs.vfat -I $LOOPBACK1
    mkfs.ext4 $LOOPBACK2
}

# Mounts the $IMAGE to $LOOPBACK (if needed) and $MOUNTDIR
    do_mount () {
        # Check if do_create already attached the SD Image
        if [ $(losetup -f) = $LOOPBACK ]; then
            trace "Attaching $IMAGE to $LOOPBACK"
            losetup $LOOPBACK $IMAGE
            partx --add $LOOPBACK
    fi

    trace "Mounting $LOOPBACK1 and $LOOPBACK2 to $MOUNTDIR"
        if [ ! -n "$opt_mountdir" ]; then
        mkdir $MOUNTDIR
        fi
        mount $LOOPBACK2 $MOUNTDIR
        mkdir -p $MOUNTDIR/boot
    mount $LOOPBACK1 $MOUNTDIR/boot
}

# Rsyncs content of $SDCARD to $IMAGE if properly mounted
do_backup () {
    if mountpoint -q $MOUNTDIR; then
            trace "Starting rsync backup of / and /boot/ to $MOUNTDIR"
        if [ -n "$opt_log" ]; then
                rsync -aEvx --del --stats --log-file $LOG /boot/ $MOUNTDIR/boot/
                rsync -aEvx --del --stats --log-file $LOG / $MOUNTDIR/
            else
                rsync -aEvx --del --stats /boot/ $MOUNTDIR/boot/
            rsync -aEvx --del --stats / $MOUNTDIR/
            fi
        else
            trace "Skipping rsync since $MOUNTDIR is not a mount point"
    fi
}

# Unmounts the $IMAGE from $MOUNTDIR and $LOOPBACK
do_umount () {
    trace "Flushing to disk"
    sync; sync

    trace "Unmounting $LOOPBACK1 and $LOOPBACK2 from $MOUNTDIR"
        umount $MOUNTDIR/boot
    umount $MOUNTDIR
        if [ ! -n "$opt_mountdir" ]; then
        rmdir $MOUNTDIR
    fi

    trace "Detaching $IMAGE from $LOOPBACK"
    partx --delete $LOOPBACK
        losetup -d $LOOPBACK
}

# Compresses $IMAGE to $IMAGE.gz using a temp file during compression
do_compress () {
    trace "Compressing $IMAGE to ${IMAGE}.gz"
    pv -tpreb $IMAGE | gzip &gt; ${IMAGE}.gz.tmp
    if [ -s ${IMAGE}.gz.tmp ]; then
            mv -f ${IMAGE}.gz.tmp ${IMAGE}.gz
            if [ -n "$opt_delete" ]; then
            rm -f $IMAGE
        fi
    fi
}

# Tries to cleanup after Ctrl-C interrupt
ctrl_c () {
    trace "Ctrl-C detected."

    if [ -s ${IMAGE}.gz.tmp ]; then
            rm ${IMAGE}.gz.tmp
    else
        do_umount
    fi

    if [ -n "$opt_log" ]; then
            trace "See rsync log in $LOG"
    fi

    error "SD Image backup process interrupted"
}

# Prints usage information
usage () {
    echo -e ""
    echo -e "$(basename $0) $VERSION by jinx"
        echo -e ""
        echo -e "Usage:"
        echo -e ""
        echo -e "    $(basename $0) $(tput bold)start$(tput sgr 0) [-clzdf] [-L logfile] [-i sdcard] sdimage"
        echo -e "    $(basename $0) $(tput bold)mount$(tput sgr 0) [-c] sdimage [mountdir]"
        echo -e "    $(basename $0) $(tput bold)umount$(tput sgr 0) sdimage [mountdir]"
        echo -e "    $(basename $0) $(tput bold)gzip$(tput sgr 0) [-df] sdimage"
        echo -e ""
        echo -e "    Commands:"
        echo -e ""
        echo -e "        $(tput bold)start$(tput sgr 0)  starts complete backup of RPi's SD Card to 'sdimage'"
        echo -e "        $(tput bold)mount$(tput sgr 0)  mounts the 'sdimage' to 'mountdir' (default: /mnt/'sdimage'/)"
        echo -e "        $(tput bold)umount$(tput sgr 0) unmounts the 'sdimage' from 'mountdir'"
        echo -e "        $(tput bold)gzip$(tput sgr 0)   compresses the 'sdimage' to 'sdimage'.gz"
        echo -e ""
        echo -e "    Options:"
        echo -e ""
        echo -e "        $(tput bold)-c$(tput sgr 0)         creates the SD Image if it does not exist"
        echo -e "        $(tput bold)-l$(tput sgr 0)         writes rsync log to 'sdimage'-YYYYmmddHHMMSS.log"
        echo -e "        $(tput bold)-z$(tput sgr 0)         compresses the SD Image (after backup) to 'sdimage'.gz"
        echo -e "        $(tput bold)-d$(tput sgr 0)         deletes the SD Image after successful compression"
        echo -e "        $(tput bold)-f$(tput sgr 0)         forces overwrite of 'sdimage'.gz if it exists"
        echo -e "        $(tput bold)-L logfile$(tput sgr 0) writes rsync log to 'logfile'"
        echo -e "        $(tput bold)-i sdcard$(tput sgr 0)  specifies the SD Card location (default: $SDCARD)"
    echo -e ""
    echo -e "Examples:"
    echo -e ""
    echo -e "    $(basename $0) rsync -c /path/to/rpi_backup.img"
    echo -e "        starts backup to 'rpi_backup.img', creating it if it does not exist"
    echo -e ""
    echo -e "    $(basename $0) rsync /path/to/\$(uname -n).img"
    echo -e "        uses the RPi's hostname as the SD Image filename"
    echo -e ""
    echo -e "    $(basename $0) rsync -cz /path/to/\$(uname -n)-\$(date +%Y-%m-%d).img"
    echo -e "        uses the RPi's hostname and today's date as the SD Image filename,"
    echo -e "        creating it if it does not exist, and compressing it after backup"
    echo -e ""
    echo -e "    $(basename $0) mount /path/to/\$(uname -n).img /mnt/rpi_image"
    echo -e "        mounts the RPi's SD Image in /mnt/rpi_image"
    echo -e ""
    echo -e "    $(basename $0) umount /path/to/raspi-$(date +%Y-%m-%d).img"
        echo -e "        unmounts the SD Image from default mountdir (/mnt/raspi-$(date +%Y-%m-%d).img/)"
    echo -e ""
}

# Read the command from command line
case $1 in
        start|mount|umount|gzip)
            opt_command=$1
        ;;
    -h|--help)
        usage
        exit 0
        ;;
    --version)
        trace "$(basename $0) $VERSION by jinx"
            exit 0
            ;;
        *)
            error "Invalid command or option: $1\nSee '$(basename $0) --help' for usage";;
esac
shift 1

# Make sure we have root rights
if [ $(id -u) -ne 0 ]; then
    error "Please run as root. Try sudo."
fi

# Read the options from command line
while getopts ":czdflL:i:" opt; do
    case $opt in
            c)  opt_create=1;;
            z)  opt_compress=1;;
            d)  opt_delete=1;;
            f)  opt_force=1;;
            l)  opt_log=1;;
            L)  opt_log=1
                LOG=$OPTARG
            ;;
        i)  SDCARD=$OPTARG;;
            \?) error "Invalid option: -$OPTARG\nSee '$(basename $0) --help' for usage";;
        :)  error "Option -$OPTARG requires an argument\nSee '$(basename $0) --help' for usage";;
        esac
    done
    shift $((OPTIND-1))

# Read the sdimage path from command line
IMAGE=$1
    if [ -z $IMAGE ]; then
    error "No sdimage specified"
fi

# Check if sdimage exists
if [ $opt_command = umount ] || [ $opt_command = gzip ]; then
    if [ ! -f $IMAGE ]; then
            error "$IMAGE does not exist"
    fi
else
    if [ ! -f $IMAGE ] &amp;&amp; [ ! -n "$opt_create" ]; then
        error "$IMAGE does not exist\nUse -c to allow creation"
    fi
fi

# Check if we should compress and sdimage.gz exists
if [ -n "$opt_compress" ] || [ $opt_command = gzip ]; then
    if [ -s ${IMAGE}.gz ] &amp;&amp; [ ! -n "$opt_force" ]; then
        error "${IMAGE}.gz already exists\nUse -f to force overwriting"
    fi
fi

# Define default rsync logfile if not defined
if [ -z $LOG ]; then
        LOG=${IMAGE}-$(date +%Y%m%d%H%M%S).log
fi

# Identify which loopback device to use
LOOPBACK=$(losetup -j $IMAGE | grep -o ^[^:]*)
if [ $opt_command = umount ]; then
        if [ -z $LOOPBACK ]; then
        error "No /dev/loop&lt;X&gt; attached to $IMAGE"
        fi
    elif [ ! -z $LOOPBACK ]; then
    error "$IMAGE already attached to $LOOPBACK mounted on $(grep ${LOOPBACK}p2 /etc/mtab | cut -d ' ' -f 2)/"
else
    LOOPBACK=$(losetup -f)
    fi
    LOOPBACK1=${LOOPBACK}p1
LOOPBACK2=${LOOPBACK}p2

# Read the optional mountdir from command line
MOUNTDIR=$2
    if [ -z $MOUNTDIR ]; then
    MOUNTDIR=/mnt/$(basename $IMAGE)/
else
    opt_mountdir=1
    if [ ! -d $MOUNTDIR ]; then
            error "Mount point $MOUNTDIR does not exist"
    fi
fi

# Check if default mount point exists
if [ $opt_command = umount ]; then
        if [ ! -d $MOUNTDIR ]; then
        error "Default mount point $MOUNTDIR does not exist"
        fi
    else
        if [ ! -n "$opt_mountdir" ] &amp;&amp; [ -d $MOUNTDIR ]; then
            error "Default mount point $MOUNTDIR already exists"
    fi
fi

# Trap keyboard interrupt (ctrl-c)
trap ctrl_c SIGINT

# Check for dependencies
for c in dd losetup parted sfdisk partx mkfs.vfat mkfs.ext4 mountpoint rsync; do
    command -v $c &gt;/dev/null 2&gt;&amp;1 || error "Required program $c is not installed"
done
if [ -n "$opt_compress" ] || [ $opt_command = gzip ]; then
    for c in pv gzip; do
        command -v $c &gt;/dev/null 2&gt;&amp;1 || error "Required program $c is not installed"
    done
fi

# Do the requested functionality
case $opt_command in
        start)
                trace "Starting SD Image backup process"
                if [ ! -f $IMAGE ] &amp;&amp; [ -n "$opt_create" ]; then
                    do_create
                fi
                do_mount
                do_backup
                do_umount
                if [ -n "$opt_compress" ]; then
                do_compress
            fi
            trace "SD Image backup process completed."
            if [ -n "$opt_log" ]; then
                    trace "See rsync log in $LOG"
            fi
            ;;
    mount)
            if [ ! -f $IMAGE ] &amp;&amp; [ -n "$opt_create" ]; then
                do_create
            fi
            do_mount
            trace "SD Image has been mounted and can be accessed at:\n    $MOUNTDIR"
                ;;
        umount)
                do_umount
                ;;
        gzip)
                do_compress
                ;;
        *)
                error "Unknown command: $opt_command"
            ;;
esac

exit 0
</code></pre><p data-anchor-id="nl88">命令示例：</p><blockquote data-anchor-id="7gvu" class="white-blockquote">
  <p><code>sudo sh bkup_rpimage.sh start -cz /mnt/share/$(uname -n)-$(date +%Y-%m-%d).img</code></p>
</blockquote><p data-anchor-id="v1zx">其中/mnt/share为备份目录，根据个人情况设置，可设置为NAS或其它位置 -c为新建备份， -z为启用压缩，会生成img.gz压缩文件，节约空间，其它选项可参看脚本</p><div class="md-section-divider"></div><h2 data-anchor-id="6afx" id="17f2fs">17.f2fs</h2><p data-anchor-id="oxvy">f2fs对树莓派的性能有一定提高，整个过程简单来说就是先备份rootfs，格式化为f2fs后再复制回去</p><ul data-anchor-id="9dvr">
<li>树莓派上:</li>
</ul><p data-anchor-id="apd4">先更新:</p><blockquote data-anchor-id="4k0c" class="white-blockquote">
  <p><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade</code></p>
</blockquote><p data-anchor-id="h1dj">修改 <em>fstab</em> 和 <em>cmdline.txt</em> :  </p><blockquote data-anchor-id="6z74" class="white-blockquote">
  <p><code>sudo nano /etc/fstab/</code></p>
</blockquote><p data-anchor-id="bgx6">添加:</p><blockquote data-anchor-id="ph1a" class="white-blockquote">
  <p>/dev/mmcblk0p2   /    f2fs defaults,noatime,discard 0 0</p>
</blockquote><p data-anchor-id="ryly">然后输入：</p><blockquote data-anchor-id="9uan" class="white-blockquote">
  <p><code>sudo nano /boot/cmdline.txt</code></p>
</blockquote><p data-anchor-id="q70n">替换</p><blockquote data-anchor-id="ns7g" class="white-blockquote">
  <p>rootfstype=<strong>ext4</strong></p>
</blockquote><p data-anchor-id="4guo">为</p><blockquote data-anchor-id="keqn" class="white-blockquote">
  <p>rootfstype=<strong>f2fs</strong></p>
</blockquote><p data-anchor-id="jjfh">fsck:</p><blockquote data-anchor-id="36st" class="white-blockquote">
  <p><code>sudo cp /bin/true /sbin/fsck.f2fs</code></p>
</blockquote><p data-anchor-id="ki7x">关机:</p><blockquote data-anchor-id="nilq" class="white-blockquote">
  <p><code>sudo shutdown -h now</code></p>
</blockquote><ul data-anchor-id="hk5r">
<li>PC上(ubuntu 32bit)：</li>
</ul><blockquote data-anchor-id="6j4y" class="white-blockquote">
  <p><code>sudo apt-get install f2fs-tools</code></p>
</blockquote><p data-anchor-id="2pnb">迁移:</p><blockquote data-anchor-id="v71i" class="white-blockquote">
  <p><code>sudo mkdir /media/root</code></p>
  
  <p><code>sudo mount /dev/sdb2 /media/root</code></p>
  
  <p><code>sudo mkdir /home/mate/backup_sd</code></p>
  
  <p><code>sudo cp -a /media/root/* ~/backup_sd</code></p>
  
  <p><code>sudo umount /dev/sdb2</code></p>
  
  <p><code>sudo mkfs.f2fs /dev/sdb2</code></p>
  
  <p><code>sudo mount -t f2fs /dev/sdb2 /media/root</code></p>
  
  <p><code>sudo cp -a ~/backup_sd/* /media/root</code></p>
  
  <p><code>sudo umount /media/root</code></p>
  
  <p><code>sudo umount /media/boot</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="3psa" id="18raspberrycast">18.RaspberryCast</h2><p data-anchor-id="e3op">此应用可以用chrome或手机将在线视频投射至树莓派播放 <br>
国内网站部分支持，需自己测试</p><blockquote data-anchor-id="jfev" class="white-blockquote">
  <p><code>wget https://raw.githubusercontent.com/vincent-lwt/RaspberryCast/master/setup.sh &amp;&amp; sudo sh setup.sh</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="8sih" id="19安装-web-server">19.安装 web server</h2><blockquote data-anchor-id="kdhc" class="white-blockquote">
  <p><code>sudo apt-get install nginx php5-common php5-fpm php-apc php5-mysql php5-gd mysql-server</code></p>
</blockquote><p data-anchor-id="kosb">为MySQL设置密码</p><blockquote data-anchor-id="ic99" class="white-blockquote">
  <p><code>sudo nano /etc/nginx/sites-enabled/default</code></p>
</blockquote><p data-anchor-id="jzd5">添加自己的 <strong>index</strong> <strong>index.php</strong>...</p><div class="md-section-divider"></div><h2 data-anchor-id="mxf9" id="20更改默认的xsession">20.更改默认的xsession</h2><blockquote data-anchor-id="9iqu" class="white-blockquote">
  <p><code>sudo update-alternatives --config x-session-manager</code></p>
  
  <p><code>sudo reboot</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="tx9q" id="21查看软件版本">21.查看软件版本</h2><blockquote data-anchor-id="ja8k" class="white-blockquote">
  <p><code>sudo apt-get install apt-show-versions</code></p>
  
  <p><code>apt-show-versions</code></p>
  
  <p><code>apt-show-versions –u</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="nbx3" id="22爬虫scrapy">22.爬虫（Scrapy）</h2><p data-anchor-id="dco4">跑爬虫比较接近电影里对Hacker印象，输入几行代码，程序就可以运行很久</p><p data-anchor-id="khku">刚好树莓派已经预装了Python2，可以在树莓派上体验一下，另外爬虫确实很实用，可以高效搜集很多信息，比复制粘贴强了很多</p><p data-anchor-id="y4ts">而且Scrapy门槛很低，几个小时就能上手，得到你想要的数据</p><p data-anchor-id="db70">安装：</p><blockquote data-anchor-id="era7" class="white-blockquote">
  <p><code>sudo apt-get install libffi-dev</code></p>
  
  <p><code>sudo apt-get install libxml2-dev</code></p>
  
  <p><code>sudo apt-get install libxslt1-dev</code></p>
  
  <p><code>sudo apt-get install python-dev</code></p>
  
  <p><code>sudo apt-get install libssl-dev</code></p>
</blockquote><p data-anchor-id="kjes">安装配置virtualenv：</p><blockquote data-anchor-id="y11s" class="white-blockquote">
  <p><code>sudo pip install virtualenv</code></p>
</blockquote><p data-anchor-id="71op">安装virtualenvwrapper：</p><blockquote data-anchor-id="nu72" class="white-blockquote">
  <p><code>sudo mkdir ~/scrapy_spider</code></p>
  
  <p><code>sudo pip install --user virtualenvwrapper</code></p>
  
  <p><code>export WORKON_HOME=~/Envs</code></p>
  
  <p><code>mkdir -p $WORKON_HOME</code></p>
  
  <p><code>source /usr/local/bin/virtualenvwrapper.sh</code></p>
</blockquote><p data-anchor-id="6pdf">创建名为scrapy的virtualenv</p><blockquote data-anchor-id="vsyc" class="white-blockquote">
  <p><code>mkvirtualenv scrapy</code></p>
</blockquote><p data-anchor-id="h2o4">配置完之后会终端行首会显示<strong>(scrapy)$</strong>，说明处于名为scrapy的virtualenv</p><blockquote data-anchor-id="hjzy" class="white-blockquote">
  <p><code>ls $WORKON_HOME</code></p>
</blockquote><p data-anchor-id="mo82">使workon在重启后依然有效：</p><blockquote data-anchor-id="yioi" class="white-blockquote">
  <p><code>sudo nano ~/.bashrc</code></p>
</blockquote><p data-anchor-id="4h3o">添加以下内容至末尾：</p><pre data-anchor-id="tqbw"><code>export WORKON_HOME=$HOME/Envs
source /usr/local/bin/virtualenvwrapper.sh
</code></pre><blockquote data-anchor-id="4rfm" class="white-blockquote">
  <p><code>source ~/.bashrc</code></p>
</blockquote><p data-anchor-id="jnhp">virtualenv内安装scrapy：</p><blockquote data-anchor-id="ybmv" class="white-blockquote">
  <p><code>(scrapy)$ sudo pip install scrapy</code></p>
</blockquote><p data-anchor-id="bjmo">进入名为scrapy的virtualenv：</p><blockquote data-anchor-id="05hg" class="white-blockquote">
  <p><code>workon scrapy</code></p>
</blockquote><p data-anchor-id="eykz">退出virtualenv：</p><blockquote data-anchor-id="qgco" class="white-blockquote">
  <p><code>deactivate</code></p>
</blockquote><p data-anchor-id="kuuu">简单爬虫示例:</p><p data-anchor-id="w8cm">单个的爬虫文件最关键是<strong>start_urls</strong>，以及返回的内容</p><p data-anchor-id="o1cm">比如你想抓取北京所有的7-11门店名称及位置</p><p data-anchor-id="q580">先登录官网<a href="http://www.7-11bj.com.cn/?store.html" target="_blank">店铺信息</a>页面，一共在8个区有店，鼠标悬停观察每个区的url，这样<strong>start_urls</strong>就确定了</p><p data-anchor-id="vm52">需要先获取每个门店的url，用Chrome浏览器右键<strong>审查</strong>门店链接，弹出窗口内右击相应代码位置 Copy &gt; Copy XPath</p><p data-anchor-id="ikz2">得到： <br>
    ...tr[1]/th/a</p><p data-anchor-id="sifa">所以url表达式为：</p><pre data-anchor-id="gh22"><code>response.xpath('.//tr/th/a/@href')
</code></pre><p data-anchor-id="3x6i">补全即可得到完整url：</p><pre data-anchor-id="ffhr"><code>response.urljoin(href.extract())
</code></pre><p data-anchor-id="59oz">然后进入单个门店url查看想获取信息的XPath</p><p data-anchor-id="nxah">门店名称为：</p><pre data-anchor-id="fb2u"><code>//*[@id="mainContentsBox"]/h4
</code></pre><p data-anchor-id="buwo">门店位置（百度地图坐标）在js代码内：</p><pre data-anchor-id="7nfh"><code>//*[@id="mainContentsBox"]/script
</code></pre><p data-anchor-id="nfce">用Shell测试是否能抓取店名及位置（百度地图坐标）:</p><blockquote data-anchor-id="bf7x" class="white-blockquote">
  <p><code>scrapy shell http://www.7-11bj.com.cn/?post/cq/223/id/270.html --nolog</code></p>
</blockquote><p data-anchor-id="8yye">输入：</p><blockquote data-anchor-id="c8p7" class="white-blockquote">
  <p><code>response.xpath('//div[@id="mainContentsBox"]/h4/text()').extract()[0]</code></p>
</blockquote><p data-anchor-id="4cfp">能够返回店名</p><p data-anchor-id="ubel">百度地图坐标藏在js代码内，需用<a href="https://docs.python.org/2/library/re.html" target="_blank">正则表达</a>提取</p><blockquote data-anchor-id="a4l7" class="white-blockquote">
  <p><code>response.xpath('//*[@id="mainContentsBox"]/script').re(r'BMap.Point\(([0-9.]+),([0-9.]+)\)')</code></p>
</blockquote><p data-anchor-id="7183">能够返回位置（百度地图坐标），7-11北京官网的一部分坐标似乎本身有问题，并不是爬虫的关系，直接去url内查看源码也是一样的结果</p><p data-anchor-id="mo3r">创建单个爬虫：</p><blockquote data-anchor-id="k77e" class="white-blockquote">
  <p><code>cd ~/scrapy_spider</code></p>
  
  <p><code>workon scrapy</code></p>
  
  <p><code>sudo nano ~/scrpay_spider/711bj.py</code></p>
</blockquote><p data-anchor-id="qrje"><em>711bj.py</em></p><pre data-anchor-id="9wss"><code># -*- coding: utf-8 -*-
import scrapy


class StackOverflowSpider(scrapy.Spider):
    name = '711bj'
    start_urls = ['http://www.7-11bj.com.cn/?chengqu/cq/223.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/224.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/225.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/226.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/227.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/228.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/242.html'] + \
                ['http://www.7-11bj.com.cn/?chengqu/cq/243.html']

    def parse(self, response):
        for href in response.xpath('.//tr/th/a/@href'):
            full_url = response.urljoin(href.extract())
            yield scrapy.Request(full_url, callback=self.parse_store)

    def parse_store(self, response):
        yield {
            'title': response.xpath('//div[@id="mainContentsBox"]/h4/text()').extract()[0],
            'BMap.Point': response.xpath('//*[@id="mainContentsBox"]/script').re(r'BMap.Point\(([0-9.]+),([0-9.]+)\)'),
            'link': response.url,
        }
</code></pre><p data-anchor-id="hr0a">保存退出 <strong>CTRL</strong> + <strong>X</strong> ,提示是否保存按 y</p><p data-anchor-id="ny7t">运行爬虫：</p><blockquote data-anchor-id="e2cu" class="white-blockquote">
  <p><code>scrapy runspider 711bj.py -o test711bj.csv</code></p>
</blockquote><p data-anchor-id="klpd">查看结果：</p><blockquote data-anchor-id="rro3" class="white-blockquote">
  <p><code>cat ~/scrapy_spider/test711bj.csv</code></p>
</blockquote><p data-anchor-id="lwtw">这当然是非常简单的一个爬虫，推荐去看<a href="http://doc.scrapy.org/en/latest/index.html" target="_blank">官方文档</a>，比如这个<a href="http://doc.scrapy.org/en/latest/intro/overview.html#walk-through-of-an-example-spider" target="_blank">例子</a>,你看懂这个例子后几分钟就能写出自己的爬虫，适用于大部分网站。官方文档写的非常完善，很多时候你搜索Scrapy的问题都会被链接到这里</p><p data-anchor-id="83h2">另外推荐一个<a href="https://www.youtube.com/watch?v=m-JQxiIxNv4" target="_blank">视频</a>，这是<a href="https://github.com/eloyz" target="_blank">Eloy Zuniga Jr.</a>一次讲座的音频修复版，时长约一个多小时，完全看懂的话，写爬虫基本就没什么问题了</p><p data-anchor-id="cpxe">爬虫可配合crontab定时爬取，比如每月爬一次7-11在北京的店铺信息：</p><blockquote data-anchor-id="2wm7" class="white-blockquote">
  <p><code>crontab -e</code></p>
</blockquote><p data-anchor-id="utgv">首次编辑<strong>crontab</strong>，会被要求选择编辑器，一般默认（Nano）即可，在文件末加入：</p><pre data-anchor-id="kzq3"><code>0 0 1 * * env -i bash -c 'export WORKON_HOME=~/Envs &amp;&amp; source /usr/local/bin/virtualenvwrapper.sh &amp;&amp; source ~/Envs/scrapy/bin/activate &amp;&amp; cd ~/scrapy_spider &amp;&amp; scrapy runspider 711bj.py -o 711bj_$(date +\%Y\%m\%d).csv &amp;&amp; deactivate'
</code></pre><p data-anchor-id="ldh7">如果爬虫被封，需要用IP代理或者加入Header </p><div class="md-section-divider"></div><h2 data-anchor-id="lmvw" id="23动态dnsdnspod">23.动态DNS（DNSPod）</h2><p data-anchor-id="h6ku">需注册DNSPod的账号，如果做Server的树莓派IP总是变动的话，可以用这个实时更新域名的IP</p><p data-anchor-id="k0cs">脚本来自<a href="https://gist.github.com/833369" target="_blank">github</a>，版权归属原作者<a href="https://github.com/chuangbo" target="_blank">chuangbo</a>,以下说明引自README</p><pre data-anchor-id="vi5b"><code>替换上你的Email，密码，域名ID，记录ID等参数，就可以运行了。 会在后台一直运行，每隔30秒检查一遍IP，如果修改了就更新IP。

获得domain_id可以用curl curl -k https://dnsapi.cn/Domain.List -d "login_email=xxx&amp;login_password=xxx"

获得record_id类似 curl -k https://dnsapi.cn/Record.List -d "login_email=xxx&amp;login_password=xxx&amp;domain_id=xxx"
</code></pre><blockquote data-anchor-id="gyog" class="white-blockquote">
  <p><code>sudo nano /usr/bin/pypod.py</code></p>
</blockquote><p data-anchor-id="5yrh"><em>pypod.py</em></p><pre data-anchor-id="u85c"><code>#!/usr/bin/env python
#-*- coding:utf-8 -*-

import httplib, urllib, urllib2
import socket
import time
import re

urllib2_urlopen = urllib2.urlopen
re_findall = re.findall

params = dict(
    login_email="ID", # replace with your email
    login_password="12345678", # replace with your password
    format="json",
    domain_id= , # replace with your domain_od, can get it by API Domain.List
    record_id= , # replace with your record_id, can get it by API Record.List
    sub_domain="www", # replace with your sub_domain
    record_line="默认",
)
current_ip = None

def ddns(ip):
    params.update(dict(value=ip))
    headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/json"}
    conn = httplib.HTTPSConnection("dnsapi.cn")
    conn.request("POST", "/Record.Ddns", urllib.urlencode(params), headers)

    response = conn.getresponse()
    print response.status, response.reason
    data = response.read()
    print data
    conn.close()
    return response.status == 200

def getip():
    try:
        ip = re_findall(r"\[.+\]", urllib2_urlopen("http://1111.ip138.com/ic.asp", timeout=10).read())[0][1:-1]
    except Exception, e:
        print e
        pass
    return ip

if __name__ == '__main__':
    while True:
        try:
            ip = getip()
            print ip
            if current_ip != ip:
                if ddns(ip):
                    current_ip = ip
        except Exception, e:
            print e
            pass
        time.sleep(300)
</code></pre><p data-anchor-id="bbyg"><br><br></p><p data-anchor-id="rrim">开机自运行：</p><blockquote data-anchor-id="9khf" class="white-blockquote">
  <p><code>sudo nano /etc/rc.local</code></p>
</blockquote><p data-anchor-id="vwdb">在</p><blockquote data-anchor-id="6xxb" class="white-blockquote">
  <p>exit 0</p>
</blockquote><p data-anchor-id="fryd">前添加:</p><blockquote data-anchor-id="j3tw" class="white-blockquote">
  <p>python /usr/bin/pypod.py</p>
</blockquote><p data-anchor-id="cgx3">不过似乎自启和Gitlab有冲突</p><div class="md-section-divider"></div><h2 data-anchor-id="pum6" id="24配置svn-server">24.配置SVN Server</h2><p data-anchor-id="6vhs">安装:</p><blockquote data-anchor-id="np3o" class="white-blockquote">
  <p><code>sudo apt-get install subversion</code></p>
</blockquote><p data-anchor-id="5919">创建存放repositories的文件夹:</p><blockquote data-anchor-id="zpkd" class="white-blockquote">
  <p><code>mkdir -p /home/pi/repos</code></p>
</blockquote><p data-anchor-id="9wb9">创建project:</p><blockquote data-anchor-id="zkkc" class="white-blockquote">
  <p><code>sudo svnadmin create /home/pi/repos/piserver</code></p>
</blockquote><p data-anchor-id="1qz3">create a project that will add to SVN:</p><blockquote data-anchor-id="gv7e" class="white-blockquote">
  <p><code>mkdir /home/pi/projects/piserver</code></p>
  
  <p><code>cd /home/pi/projects/piserver</code></p>
</blockquote><p data-anchor-id="q1jq">Initial Commit</p><p data-anchor-id="7pju">import:</p><blockquote data-anchor-id="fyew" class="white-blockquote">
  <p><code>sudo svn import /home/pi/projects/piserver/ file://localhost/home/pi/repos/piserver/</code></p>
</blockquote><p data-anchor-id="7bfm">Set up Remote Access:</p><blockquote data-anchor-id="fiv0" class="white-blockquote">
  <p><code>sudo apt-get install apache2 libapache2-svn</code> <br>
  <code>sudo nano /etc/apache2/mods-available/dav_svn.conf</code></p>
</blockquote><p data-anchor-id="pxay">添加:</p><pre data-anchor-id="5597"><code>&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /home/pi/repos
  AuthType Basic
  AuthName "Subversion Repo"
  AuthUserFile /etc/apache2/dav_svn.passwd
  &lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;
    Require valid-user
  &lt;/LimitExcept&gt;
 &lt;/Location&gt;
</code></pre><blockquote data-anchor-id="jj6r" class="white-blockquote">
  <p><code>sudo /etc/init.d/apache2 restart</code></p>
  
  <p><code>sudo chown -R www-data:www-data /home/pi/repos</code></p>
</blockquote><p data-anchor-id="qk38">设置密码:</p><blockquote data-anchor-id="yf5d" class="white-blockquote">
  <p><code>sudo htpasswd -c /etc/apache2/dav_svn.passwd pi</code></p>
</blockquote><p data-anchor-id="h22t">访问:</p><blockquote data-anchor-id="6gh6" class="white-blockquote">
  <p>\raspberrypi/svn/piserver</p>
</blockquote><p data-anchor-id="gk5a">删除repos:</p><blockquote data-anchor-id="onhn" class="white-blockquote">
  <p><code>sudo rm -rf /home/pi/repos</code></p>
</blockquote><p data-anchor-id="l3zp">Windows下check out:</p><p data-anchor-id="fzqu">"SVN Checkout"</p><p data-anchor-id="f3n4">URL of repository: <br>
\raspberrypi/svn/piserver</p><div class="md-section-divider"></div><h2 data-anchor-id="bzwx" id="25用命令行发邮件mutt">25.用命令行发邮件（Mutt）</h2><p data-anchor-id="a9sc">安装:</p><pre data-anchor-id="x9rf"><code>sudo apt-get install mutt
</code></pre><p data-anchor-id="23qy">安装中如果被询问<strong>postfix</strong>的配置，全选默认即可</p><p data-anchor-id="5wmq">配置:</p><pre data-anchor-id="9j1r"><code>mkdir -p ~/.mutt/cache/headers
mkdir ~/.mutt/cache/bodies
touch ~/.mutt/certificates 
touch ~/.mutt/muttrc
</code></pre><p data-anchor-id="6f52">Tip: 如果在Gmail帐户启用了“两步认证”，则需为Mutt单独生成一个密码，在下面添加帐户信息的时候就填这个专用密码； 如果发送失败可能需要安装 <code>mutt-patched</code></p><pre data-anchor-id="3mvn"><code>sudo nano ~/.mutt/muttrc
</code></pre><p data-anchor-id="t3hm">Hotmail:</p><p data-anchor-id="rpar">见这个 <a href="https://git.io/v1VO4" target="_blank">gist</a></p><p data-anchor-id="odog">Gmail:</p><p data-anchor-id="66g1">添加:</p><pre data-anchor-id="lyvz"><code>set ssl_starttls=yes
set ssl_force_tls=yes
set imap_user = '
change_this_user_name@gmail.com'
set imap_pass = 'PASSWORD'
set from='
change_this_user_name@gmail.com'
set realname='Your Name'
set folder = imaps://imap.gmail.com/
set spoolfile = imaps://imap.gmail.com/INBOX
set postponed="imaps://imap.gmail.com/[Gmail]/Drafts"
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"
set certificate_file = "~/.mutt/certificates"
set smtp_url = 'smtps://
change_this_user_name@gmail.com:
PASSWORD@smtp.gmail.com:465/'
set move = no
set imap_keepalive = 900    
set record=""
</code></pre><p data-anchor-id="wuhc">发送邮件:</p><pre data-anchor-id="8dhy"><code>mutt -s "Subject" somejoeorjane@someserver.com
</code></pre><p data-anchor-id="nxqc">有帮助的链接: <a href="https://wiki.archlinux.org/index.php/mutt" target="_blank">Arch wiki</a></p><div class="md-section-divider"></div><h2 data-anchor-id="vptn" id="26命令行访问bbstelnet">26.命令行访问BBS（Telnet）</h2><blockquote data-anchor-id="y9m6" class="white-blockquote">
  <p><code>sudo apt-get install telnet</code></p>
  
  <p><code>luit -encoding gbk telnet newsmth.net</code></p>
</blockquote><p data-anchor-id="8fu3">另推荐一个神奇的站点，可以观看star war:</p><blockquote data-anchor-id="jebx" class="white-blockquote">
  <p><code>telnet towel.blinkenlights.nl</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="489y" id="27命令行播放网易音乐netease-musicbox">27.命令行播放网易音乐（Netease-MusicBox）</h2><blockquote data-anchor-id="bp2f" class="white-blockquote">
  <p><code>sudo apt-get install python-dev mpg123</code></p>
  
  <p><code>sudo pip install Netease-MusicBox</code></p>
</blockquote><p data-anchor-id="ujdw">如果报pip相关的错误，可能需要安装 <strong>pip</strong>：</p><blockquote data-anchor-id="brfx" class="white-blockquote">
  <p><code>sudo apt-get install python-pip</code></p>
</blockquote><p data-anchor-id="n6ls">使用软件：</p><blockquote data-anchor-id="obqb" class="white-blockquote">
  <p><code>musicbox</code></p>
</blockquote><p data-anchor-id="1at7">上下移动：<strong>J</strong>、<strong>K</strong></p><p data-anchor-id="xw7b">确认：<strong>Enter</strong></p><p data-anchor-id="in48">播放：<strong>Space</strong></p><p data-anchor-id="m47y">其它操作参加其<a href="https://github.com/darknessomi/musicbox" target="_blank">Github页面</a></p><div class="md-section-divider"></div><h2 data-anchor-id="fzf7" id="28命令行阅读官网博客的rssnewsbeuter">28.命令行阅读官网博客的RSS（Newsbeuter）</h2><blockquote data-anchor-id="eq8q" class="white-blockquote">
  <p><code>sudo apt-get install newsbeuter</code></p>
  
  <p><code>mkdir ~/.newsbeuter</code></p>
  
  <p><code>sudo nano ~/.newsbeuter/urls</code></p>
</blockquote><p data-anchor-id="jvko">添加RSS源：</p><blockquote data-anchor-id="5c9f" class="white-blockquote">
  <p><a href="https://www.raspberrypi.org/feed/" target="_blank">https://www.raspberrypi.org/feed/</a></p>
</blockquote><p data-anchor-id="ol7u">保存退出；首次运行：</p><blockquote data-anchor-id="7npe" class="white-blockquote">
  <p><code>newsbeuter</code></p>
</blockquote><p data-anchor-id="bqmt">按 <strong>R</strong> 重新加载</p><p data-anchor-id="rnp7">退出按 <strong>q</strong></p><div class="md-section-divider"></div><h2 data-anchor-id="ui8a" id="29微信聊天机器人itchat">29.微信聊天机器人（ItChat）</h2><blockquote data-anchor-id="4lx5" class="white-blockquote">
  <p><code>wget https://github.com/littlecodersh/ItChat/archive/robot.zip</code></p>
  
  <p><code>unzip ItChat*</code></p>
  
  <p><code>cd ItChat*</code></p>
</blockquote><p data-anchor-id="j60q">可以修改 <em>/ItChat-robot/plugin/config/autoreply.db</em> 定制若干关键词的回答，比如添加一些常用的linux命令以供自己以后查询使用，db文件可用 <a href="http://sqlitebrowser.org/" target="_blank">sqlitebrowser</a> 编辑</p><p data-anchor-id="73me">如果需要聊天功能的话需要接入图灵机器人，到其<a href="http://www.tuling123.com" target="_blank">官网</a>申请一个免费账号，在 <em>仪表盘</em> -&gt; <em>机器人接入</em> 内找到 <strong>API Key</strong>，将其复制到 <em>/ItChat-robot/plugin/config/tuling.json</em> 文件内</p><p data-anchor-id="2jsv">可以将ItChat开在一个screen内</p><blockquote data-anchor-id="qzoy" class="white-blockquote">
  <p><code>screen bash</code></p>
</blockquote><p data-anchor-id="fu4j">运行：</p><blockquote data-anchor-id="gqnm" class="white-blockquote">
  <p><code>python ItChat.py</code></p>
</blockquote><p data-anchor-id="ocwu">之后使用手机扫描二维码登录</p><p data-anchor-id="d42u">如果运行报错提示缺少模块，则安装相应模块即可</p><div class="md-section-divider"></div><h2 data-anchor-id="6fm9" id="30搜索软件包">30.搜索软件包</h2><blockquote data-anchor-id="epsa" class="white-blockquote">
  <p><code>apt-cache search keyword</code></p>
</blockquote><div class="md-section-divider"></div><h2 data-anchor-id="4e63" id="31微信远程控制树莓派">31.微信远程控制树莓派</h2><p data-anchor-id="370q">基于 <a href="https://github.com/littlecodersh" target="_blank">littlecoder</a> 的 <a href="https://github.com/littlecodersh/ItChat" target="_blank">ItChat</a> 框架写了一个简单的脚本，能实现基本的控制，大部分命令行的命令应该都可用，比较适合无公网IP的情况下作远程控制，欢迎反馈报错</p><p data-anchor-id="061g">Debian / Raspbian Jessie 安装(包括安装配置aria2):</p><blockquote data-anchor-id="ceqd" class="white-blockquote">
  <p><code>/bin/bash -c "$(curl -sL https://git.io/vXy3m)"</code></p>
</blockquote><p data-anchor-id="ptcf">运行：</p><blockquote data-anchor-id="z21u" class="white-blockquote">
  <p><code>wechat-remote</code></p>
</blockquote><p data-anchor-id="iusq">具体功能的安装及使用见项目的说明：<a href="https://github.com/yangxuan8282/wechat-remote/blob/master/README-zh.md" target="_blank">https://github.com/yangxuan8282/wechat-remote/blob/master/README-zh.md</a></p><p data-anchor-id="jv7m">部分账号无法给自己发送信息，需用其它账号发送，并注释掉相关代码（在项目说明 <a href="https://github.com/yangxuan8282/wechat-remote/blob/master/README-zh.md#issues" target="_blank">Issues</a> 部分有具体说明）</p><p data-anchor-id="1870">比较适合作远程下载，也可以播放在线视频</p><p data-anchor-id="4uds">特别说明一下 <code>apt-get</code> 命令也可以执行，但不建议这样做，因为返回结果较慢，可能导致移动时间内进程被锁</p><div class="md-section-divider"></div><h2 data-anchor-id="4i01" id="常用网站">常用网站</h2><ul>
<li>官方文档： <a href="https://www.raspberrypi.org/documentation" target="_blank">www.raspberrypi.org/documentation</a></li>
<li>官方论坛： <a href="https://www.raspberrypi.org/forums/" target="_blank">www.raspberrypi.org/forums</a></li>
<li>故障排除： <a href="http://elinux.org/R-Pi_Troubleshooting" target="_blank">R-Pi_Troubleshooting</a></li>
<li>官方config.txt说明：<a href="https://www.raspberrypi.org/documentation/configuration/config-txt.md" target="_blank">config-txt.md</a></li>
<li><a href="http://elinux.org/" target="_blank">elinx.org</a></li>
<li><a href="https://wiki.archlinux.org" target="_blank">wiki.archlinux.org</a></li>
<li><a href="https://www.reddit.com/r/raspberry_pi" target="_blank">www.reddit.com/r/raspberry_pi</a></li>
</ul></div>
    <div class="remark-icons">
    </div>
</div>

<!--in page preview buttons. -->
<div class="in-page-preview-buttons in-page-preview-buttons-full-reader">
    <ul>
        <li class="in-page-button dropdown" id="preview-toc-button" title="内容目录 Ctrl+Alt+O">
            <span class="dropdown-toggle icon-list" data-toggle="dropdown"></span>
            <div id="toc-list" class="dropdown-menu theme pull-right"> <!-- Add theme means this element will be changed when apply theme color. -->
                <h3>内容目录</h3>
                <hr>
                <div class="table-of-contents"></div>
            </div>
        </li>
    </ul>
</div>

<div id="reader-full-toolbar" class="reader-full-toolbar-shown" style="padding-top: 0;">
    <ul id="reader-full-toolbar-home" class="preview-button-row">
        <li class="preview-button-full-reader" id="preview-editor-button" title="撰写文本 Ctrl+Alt+M">
            <span class="icon-pencil"></span>
        </li>
    </ul>
    <ul id="preview-button-row" class="preview-button-row">
        <li class="preview-button-full-reader dropdown" id="preview-list-button" title="文本列表 Ctrl+Alt+F">
            <span class="dropdown-toggle icon-reorder" data-toggle="dropdown"></span>
            <ul id="file-list" class="dropdown-menu theme-black pull-right" role="menu">
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="Archlinux">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">Archlinux</span></span>
                            <span class="tag-count pull-right">2</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-04-28T11:33:50.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/344907" title="【已发布】 2016-11-18T14:10:52.000000Z">
        <i class="icon-share-sign"></i>
        <span id="344907">Raspberrypi 3 install &amp; configure Archlinux（XFCE,f2fs）</span>
        </a>
    </li>

                            
    <li class="file-item item" file-created-date="2016-04-17T05:43:59.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/347647" title="【已发布】 2016-06-12T03:12:01.000000Z">
        <i class="icon-share-sign"></i>
        <span id="347647">树莓派3安装配置 Arch Linux（LXQT）</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="Beijing">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">Beijing</span></span>
                            <span class="tag-count pull-right">1</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-09-07T12:45:34.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/494838" title="【已发布】 2016-09-07T12:48:20.000000Z">
        <i class="icon-share-sign"></i>
        <span id="494838">How do I found flat in Beijing</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="mate">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">mate</span></span>
                            <span class="tag-count pull-right">1</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-05-12T04:21:51.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/374932" title="【已发布】 2016-06-27T12:28:49.000000Z">
        <i class="icon-share-sign"></i>
        <span id="374932">RPi3 Mate Recipe</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="raspberrypi">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">raspberrypi</span></span>
                            <span class="tag-count pull-right">4</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-05-12T04:21:51.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/374932" title="【已发布】 2016-06-27T12:28:49.000000Z">
        <i class="icon-share-sign"></i>
        <span id="374932">RPi3 Mate Recipe</span>
        </a>
    </li>

                            
    <li class="file-item item" file-created-date="2016-04-28T11:33:50.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/344907" title="【已发布】 2016-11-18T14:10:52.000000Z">
        <i class="icon-share-sign"></i>
        <span id="344907">Raspberrypi 3 install &amp; configure Archlinux（XFCE,f2fs）</span>
        </a>
    </li>

                            
    <li class="file-item item" file-created-date="2016-04-17T05:43:59.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/347647" title="【已发布】 2016-06-12T03:12:01.000000Z">
        <i class="icon-share-sign"></i>
        <span id="347647">树莓派3安装配置 Arch Linux（LXQT）</span>
        </a>
    </li>

                            
    <li class="file-item item" file-created-date="2016-03-22T09:29:55.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/321467" title="【已发布】 2016-12-13T09:15:19.000000Z">
        <i class="icon-share-sign"></i>
        <span id="321467" class="whiter-on-black">树莓派3的使用(Raspbian)</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="rent_flat">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">rent_flat</span></span>
                            <span class="tag-count pull-right">1</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-09-07T12:45:34.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/494838" title="【已发布】 2016-09-07T12:48:20.000000Z">
        <i class="icon-share-sign"></i>
        <span id="494838">How do I found flat in Beijing</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="北京">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">北京</span></span>
                            <span class="tag-count pull-right">1</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-09-07T12:43:18.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/494836" title="【已发布】 2016-09-07T12:47:18.000000Z">
        <i class="icon-share-sign"></i>
        <span id="494836">上一次租房过程（北京）</span>
        </a>
    </li>

                    </ul>
                    </li>
                    <li>
                    <ul class="tag-list">
                        <li class="tag-item item" tag-name="租房">
                            <span class="pull-left"><i class="icon-tag"></i><span class="tag-name">租房</span></span>
                            <span class="tag-count pull-right">1</span>
                            <div class="clearfix"></div>
                        </li>
                            
    <li class="file-item item" file-created-date="2016-09-07T12:43:18.000000Z">
        <a tabindex="-1" href="https://www.zybuluo.com/yangxuan/note/494836" title="【已发布】 2016-09-07T12:47:18.000000Z">
        <i class="icon-share-sign"></i>
        <span id="494836">上一次租房过程（北京）</span>
        </a>
    </li>

                    </ul>
                    </li>
            </ul>
            <ul id="file-list-topbar" class="dropdown-menu theme-black pull-right" role="menu">
                <li id="search-file-bar">
                    <i class="icon-search icon-large"></i>
                    <input type="text" id="search-file-textbox" placeholder="搜索 yangxuan 的文稿标题， * 显示全部">
                    <i class="icon-level-down icon-rotate-90 icon-large"></i>
                </li>
                <li id="tag-file-bar">
                    以下【标签】将用于标记这篇文稿：
                </li>
            </ul>
        </li>
        <li class="preview-button-full-reader" id="preview-theme-button" title="主题切换 Ctrl+Alt+Y">
            <span class="icon-adjust"></span>
        </li>
        <li class="preview-button-full-reader" id="preview-fullscreen-button" title="全屏模式 F11">
            <span class="icon-fullscreen"></span>
        </li>
        <li class="preview-button-full-reader wmd-spacer"></li>
        <li class="preview-button-full-reader dropdown" id="preview-about-button" title="关于本站">
            <span class="dropdown-toggle icon-info-sign" data-toggle="dropdown" data-hover="dropdown" data-delay="100" data-close-others="true"></span>
            <ul id="about-menu" class="dropdown-menu theme-black pull-right" role="menu">
                <li title="下载全平台客户端"><a tabindex="-1" href="https://www.zybuluo.com/cmd" target="_blank"><i class="icon-laptop"></i>下载客户端</a></li>
                <li title="@ghosert"><a tabindex="-1" href="http://www.weibo.com/ghosert" target="_blank"><i class="icon-weibo"></i>关注开发者</a></li>
                <li title=""><a tabindex="-1" href="https://github.com/ghosert/cmd-editor/issues" target="_blank"><i class="icon-github-alt"></i>报告问题，建议</a></li>
                <li title="support@zybuluo.com"><a tabindex="-1" href="mailto:support@zybuluo.com" target="_blank"><i class="icon-envelope"></i>联系我们</a></li>
            </ul>
        </li>
    </ul>
</div>

